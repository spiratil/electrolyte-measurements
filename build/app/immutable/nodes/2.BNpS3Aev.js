import{c as Ee,a as N,t as M,b as ar,n as Er,d as je,s as Br,e as Vr}from"../chunks/B8itCrcA.js";import{G as xt,H as bt,I as Nr,J as ct,K as Ge,h as he,M as Ar,N as kr,b as Mr,c as zr,g,O as Or,P as Pr,Q as yt,R as Ke,e as Te,T as Tr,U as sr,d as or,p as Rr,V as lr,W as Ur,m as qr,X as _t,Y as Qe,Z as ft,_ as wt,$ as jr,a0 as Fr,a1 as Lr,D as Dr,a2 as mt,a3 as Hr,a4 as Jr,a5 as ur,q as Zr,a6 as Yr,a7 as Wr,u as vr,r as dr,f as cr,a8 as Xr,o as Z,y as S,z as x,B as J,k as $,v as y,x as ee,A as q,s as qe,F as be,a as Be,a9 as Ae,n as Gr}from"../chunks/kC4pbayS.js";import{i as O}from"../chunks/scTS6WMA.js";import{I as ie}from"../chunks/IUZhUUn4.js";import{o as Kr}from"../chunks/DdCNxYsd.js";import{a as Qr,r as hr,s as Ve,p as It}from"../chunks/Qdf7IHAe.js";import{p as te,s as H}from"../chunks/CcAI76O4.js";import{s as ne}from"../chunks/CsrE2ifj.js";function $r(a){var e=Nr,t=ct;xt(null),bt(null);try{return a()}finally{xt(e),bt(t)}}function gt(a,e,t,r=t){a.addEventListener(e,()=>$r(t));const i=a.__on_r;i?a.__on_r=()=>{i(),r(!0)}:a.__on_r=()=>r(!0),Qr()}function Ne(a,e){return e}function ei(a,e,t,r){for(var i=[],l=e.length,u=0;u<l;u++)jr(e[u].e,i,!0);var n=l>0&&i.length===0&&t!==null;if(n){var s=t.parentNode;Fr(s),s.append(t),r.clear(),xe(a,e[0].prev,e[l-1].next)}Lr(i,()=>{for(var o=0;o<l;o++){var d=e[o];n||(r.delete(d.k),xe(a,d.prev,d.next)),Dr(d.e,!n)}})}function ue(a,e,t,r,i,l=null){var u=a,n={flags:e,items:new Map,first:null},s=(e&ur)!==0;if(s){var o=a;u=he?Ge(Ar(o)):o.appendChild(kr())}he&&Mr();var d=null,v=!1,c=Or(()=>{var f=t();return Ur(f)?f:f==null?[]:lr(f)});zr(()=>{var f=g(c),h=f.length;if(v&&h===0)return;v=h===0;let m=!1;if(he){var p=u.data===Pr;p!==(h===0)&&(u=yt(),Ge(u),Ke(!1),m=!0)}if(he){for(var C=null,w,I=0;I<h;I++){if(Te.nodeType===8&&Te.data===Tr){u=Te,m=!0,Ke(!1);break}var b=f[I],E=r(b,I);w=fr(Te,n,C,null,b,E,I,i,e,t),n.items.set(E,w),C=w}h>0&&Ge(yt())}he||ti(f,n,u,i,e,r,t),l!==null&&(h===0?d?sr(d):d=or(()=>l(u)):d!==null&&Rr(d,()=>{d=null})),m&&Ke(!0),g(c)}),he&&(u=Te)}function ti(a,e,t,r,i,l,u){var _,U,Y,V;var n=(i&Yr)!==0,s=(i&(mt|ft))!==0,o=a.length,d=e.items,v=e.first,c=v,f,h=null,m,p=[],C=[],w,I,b,E;if(n)for(E=0;E<o;E+=1)w=a[E],I=l(w,E),b=d.get(I),b!==void 0&&((_=b.a)==null||_.measure(),(m??(m=new Set)).add(b));for(E=0;E<o;E+=1){if(w=a[E],I=l(w,E),b=d.get(I),b===void 0){var z=c?c.e.nodes_start:t;h=fr(z,e,h,h===null?e.first:h.next,w,I,E,r,i,u),d.set(I,h),p=[],C=[],c=h.next;continue}if(s&&ri(b,w,E,i),(b.e.f&Qe)!==0&&(sr(b.e),n&&((U=b.a)==null||U.unfix(),(m??(m=new Set)).delete(b))),b!==c){if(f!==void 0&&f.has(b)){if(p.length<C.length){var k=C[0],A;h=k.prev;var P=p[0],T=p[p.length-1];for(A=0;A<p.length;A+=1)St(p[A],k,t);for(A=0;A<C.length;A+=1)f.delete(C[A]);xe(e,P.prev,T.next),xe(e,h,P),xe(e,T,k),c=k,h=T,E-=1,p=[],C=[]}else f.delete(b),St(b,c,t),xe(e,b.prev,b.next),xe(e,b,h===null?e.first:h.next),xe(e,h,b),h=b;continue}for(p=[],C=[];c!==null&&c.k!==I;)(c.e.f&Qe)===0&&(f??(f=new Set)).add(c),C.push(c),c=c.next;if(c===null)continue;b=c}p.push(b),h=b,c=b.next}if(c!==null||f!==void 0){for(var j=f===void 0?[]:lr(f);c!==null;)(c.e.f&Qe)===0&&j.push(c),c=c.next;var L=j.length;if(L>0){var R=(i&ur)!==0&&o===0?t:null;if(n){for(E=0;E<L;E+=1)(Y=j[E].a)==null||Y.measure();for(E=0;E<L;E+=1)(V=j[E].a)==null||V.fix()}ei(e,j,R,d)}}n&&Zr(()=>{var D;if(m!==void 0)for(b of m)(D=b.a)==null||D.apply()}),ct.first=e.first&&e.first.e,ct.last=h&&h.e}function ri(a,e,t,r){(r&mt)!==0&&wt(a.v,e),(r&ft)!==0?wt(a.i,t):a.i=t}function fr(a,e,t,r,i,l,u,n,s,o){var d=(s&mt)!==0,v=(s&Hr)===0,c=d?v?qr(i):_t(i):i,f=(s&ft)===0?u:_t(u),h={i:f,v:c,k:l,a:null,e:null,prev:t,next:r};try{return h.e=or(()=>n(a,c,f,o),he),h.e.prev=t&&t.e,h.e.next=r&&r.e,t===null?e.first=h:(t.next=h,t.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function St(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,i=e?e.e.nodes_start:t,l=a.e.nodes_start;l!==r;){var u=Jr(l);i.before(l),l=u}}function xe(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function ii(a,e,t=e){var r=Wr();gt(a,"input",i=>{var l=i?a.defaultValue:a.value;if(l=$e(a)?et(l):l,t(l),r&&l!==(l=e())){var u=a.selectionStart,n=a.selectionEnd;a.value=l??"",n!==null&&(a.selectionStart=u,a.selectionEnd=Math.min(n,a.value.length))}}),(he&&a.defaultValue!==a.value||vr(e)==null&&a.value)&&t($e(a)?et(a.value):a.value),dr(()=>{var i=e();$e(a)&&i===et(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function ni(a,e,t=e){gt(a,"change",r=>{var i=r?a.defaultChecked:a.checked;t(i)}),(he&&a.defaultChecked!==a.checked||vr(e)==null)&&t(a.checked),dr(()=>{var r=e();a.checked=!!r})}function $e(a){var e=a.type;return e==="number"||e==="range"}function et(a){return a===""?null:+a}function mr(a,e,t){if(a.multiple)return si(a,e);for(var r of a.options){var i=Ue(r);if(Xr(i,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function ai(a,e){cr(()=>{var t=new MutationObserver(()=>{var r=a.__value;mr(a,r)});return t.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function gr(a,e,t=e){var r=!0;gt(a,"change",i=>{var l=i?"[selected]":":checked",u;if(a.multiple)u=[].map.call(a.querySelectorAll(l),Ue);else{var n=a.querySelector(l)??a.querySelector("option:not([disabled])");u=n&&Ue(n)}t(u)}),cr(()=>{var i=e();if(mr(a,i,r),r&&i===void 0){var l=a.querySelector(":checked");l!==null&&(i=Ue(l),t(i))}a.__value=i,r=!1}),ai(a)}function si(a,e){for(var t of a.options)t.selected=~e.indexOf(Ue(t))}function Ue(a){return"__value"in a?a.__value:a.value}function oi(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function li(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var e=a.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(a).forEach(function(r){var i=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return a[r]}})}),t}var ui=M("<h2> </h2>"),vi=M("<h3> </h3>"),di=M("<h4> </h4>");function K(a,e){let t=te(e,"inline",3,!1),r=te(e,"center",3,!1);var i=Ee(),l=Z(i);{var u=s=>{var o=ui(),d=S(o,!0);x(o),J(()=>{ne(o,1,`text-4xl ${t()?"inline":""} ${r()?"text-center":""} font-bold text-primary`,"svelte-odwoi3"),H(d,e.title)}),N(s,o)},n=(s,o)=>{{var d=c=>{var f=vi(),h=S(f,!0);x(f),J(()=>{ne(f,1,`text-2xl ${t()?"inline":""} ${r()?"text-center":""} font-semibold text-secondary`,"svelte-odwoi3"),H(h,e.title)}),N(c,f)},v=c=>{var f=di(),h=S(f,!0);x(f),J(()=>{ne(f,1,`text-xl ${t()?"inline":""} ${r()?"text-center":""} font-medium text-accent`,"svelte-odwoi3"),H(h,e.title)}),N(c,f)};O(s,c=>{e.type=="h3"?c(d):c(v,!1)},o)}};O(l,s=>{e.type=="h2"?s(u):s(n,!1)})}N(a,i)}var Ct={},tt,Et;function pr(){if(Et)return tt;Et=1;function a(e,t,r,i){this.feasible=r,this.evaluation=t,this.bounded=i,this._tableau=e}return tt=a,a.prototype.generateSolutionSet=function(){for(var e={},t=this._tableau,r=t.varIndexByRow,i=t.variablesPerIndex,l=t.matrix,u=t.rhsColumn,n=t.height-1,s=Math.round(1/t.precision),o=1;o<=n;o+=1){var d=r[o],v=i[d];if(!(v===void 0||v.isSlack===!0)){var c=l[o][u];e[v.id]=Math.round((Number.EPSILON+c)*s)/s}}return e},tt}var rt,Bt;function ci(){if(Bt)return rt;Bt=1;var a=pr();function e(t,r,i,l,u){a.call(this,t,r,i,l),this.iter=u}return rt=e,e.prototype=Object.create(a.prototype),e.constructor=e,rt}var it,Vt;function ve(){if(Vt)return it;Vt=1;var a=pr(),e=ci();function t(i){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=i||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}it=t,t.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()};function r(i,l){this.priority=i,this.reducedCosts=new Array(l);for(var u=0;u<l;u+=1)this.reducedCosts[u]=0}return r.prototype.copy=function(){var i=new r(this.priority,this.reducedCosts.length);return i.reducedCosts=this.reducedCosts.slice(),i},t.prototype.setOptionalObjective=function(i,l,u){var n=this.objectivesByPriority[i];if(n===void 0){var s=Math.max(this.width,l+1);n=new r(i,s),this.objectivesByPriority[i]=n,this.optionalObjectives.push(n),this.optionalObjectives.sort(function(o,d){return o.priority-d.priority})}n.reducedCosts[l]=u},t.prototype.initialize=function(i,l,u,n){this.variables=u,this.unrestrictedVars=n,this.width=i,this.height=l;for(var s=new Array(i),o=0;o<i;o++)s[o]=0;this.matrix=new Array(l);for(var d=0;d<l;d++)this.matrix[d]=s.slice();this.varIndexByRow=new Array(this.height),this.varIndexByCol=new Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=i+l-2,this.rowByVarIndex=new Array(this.nVars),this.colByVarIndex=new Array(this.nVars),this.lastElementIndex=this.nVars},t.prototype._resetMatrix=function(){var i=this.model.variables,l=this.model.constraints,u=i.length,n=l.length,s,o,d=this.matrix[0],v=this.model.isMinimization===!0?-1:1;for(s=0;s<u;s+=1){var c=i[s],f=c.priority,h=v*c.cost;f===0?d[s+1]=h:this.setOptionalObjective(f,s+1,h),o=i[s].index,this.rowByVarIndex[o]=-1,this.colByVarIndex[o]=s+1,this.varIndexByCol[s+1]=o}for(var m=1,p=0;p<n;p+=1){var C=l[p],w=C.index;this.rowByVarIndex[w]=m,this.colByVarIndex[w]=-1,this.varIndexByRow[m]=w;var I,b,E,z=C.terms,k=z.length,A=this.matrix[m++];if(C.isUpperBound){for(I=0;I<k;I+=1)b=z[I],E=this.colByVarIndex[b.variable.index],A[E]=b.coefficient;A[0]=C.rhs}else{for(I=0;I<k;I+=1)b=z[I],E=this.colByVarIndex[b.variable.index],A[E]=-b.coefficient;A[0]=-C.rhs}}},t.prototype.setModel=function(i){this.model=i;var l=i.nVariables+1,u=i.nConstraints+1;return this.initialize(l,u,i.variables,i.unrestrictedVariables),this._resetMatrix(),this},t.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var i=this.lastElementIndex;return this.lastElementIndex+=1,i},t.prototype.density=function(){for(var i=0,l=this.matrix,u=0;u<this.height;u++)for(var n=l[u],s=0;s<this.width;s++)n[s]!==0&&(i+=1);return i/(this.height*this.width)},t.prototype.setEvaluation=function(){var i=Math.round(1/this.precision),l=this.matrix[this.costRowIndex][this.rhsColumn],u=Math.round((Number.EPSILON+l)*i)/i;this.evaluation=u,this.simplexIters===0&&(this.bestPossibleEval=u)},t.prototype.getSolution=function(){var i=this.model.isMinimization===!0?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new e(this,i,this.feasible,this.bounded,this.branchAndCutIterations):new a(this,i,this.feasible,this.bounded)},it}var Nt;function hi(){if(Nt)return Ct;Nt=1;var a=ve();a.prototype.simplex=function(){return this.bounded=!0,this.phase1(),this.feasible===!0&&this.phase2(),this},a.prototype.phase1=function(){for(var t=this.model.checkForCycles,r=[],i=this.matrix,l=this.rhsColumn,u=this.width-1,n=this.height-1,s,o=0;;){for(var d=0,v=-this.precision,c=1;c<=n;c++){s=this.unrestrictedVars[this.varIndexByRow[c]]===!0;var f=i[c][l];f<v&&(v=f,d=c)}if(d===0)return this.feasible=!0,o;for(var h=0,m=-1/0,p=i[0],C=i[d],w=1;w<=u;w++){var I=C[w];if(s=this.unrestrictedVars[this.varIndexByCol[w]]===!0,s||I<-this.precision){var b=-p[w]/I;m<b&&(m=b,h=w)}}if(h===0)return this.feasible=!1,o;if(t){r.push([this.varIndexByRow[d],this.varIndexByCol[h]]);var E=this.checkForCycles(r);if(E.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+E[0]),this.model.messages.push("Length :"+E[1]),this.feasible=!1,o}this.pivot(d,h),o+=1}},a.prototype.phase2=function(){for(var t=this.model.checkForCycles,r=[],i=this.matrix,l=this.rhsColumn,u=this.width-1,n=this.height-1,s=this.precision,o=this.optionalObjectives.length,d=null,v=0,c,f;;){var h=i[this.costRowIndex];o>0&&(d=[]);for(var m=0,p=s,C=!1,w=1;w<=u;w++){if(c=h[w],f=this.unrestrictedVars[this.varIndexByCol[w]]===!0,o>0&&-s<c&&c<s){d.push(w);continue}if(f&&c<0){-c>p&&(p=-c,m=w,C=!0);continue}c>p&&(p=c,m=w,C=!1)}if(o>0)for(var I=0;m===0&&d.length>0&&I<o;){var b=[],E=this.optionalObjectives[I].reducedCosts;p=s;for(var z=0;z<d.length;z++){if(w=d[z],c=E[w],f=this.unrestrictedVars[this.varIndexByCol[w]]===!0,-s<c&&c<s){b.push(w);continue}if(f&&c<0){-c>p&&(p=-c,m=w,C=!0);continue}c>p&&(p=c,m=w,C=!1)}d=b,I+=1}if(m===0)return this.setEvaluation(),this.simplexIters+=1,v;var k=0,A=1/0;this.varIndexByRow;for(var P=1;P<=n;P++){var T=i[P],j=T[l],L=T[m];if(!(-s<L&&L<s)){if(L>0&&s>j&&j>-s){A=0,k=P;break}var R=C?-j/L:j/L;R>s&&A>R&&(A=R,k=P)}}if(A===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[m],v;if(t){r.push([this.varIndexByRow[k],this.varIndexByCol[m]]);var _=this.checkForCycles(r);if(_.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+_[0]),this.model.messages.push("Length :"+_[1]),this.feasible=!1,v}this.pivot(k,m,!0),v+=1}};var e=[];return a.prototype.pivot=function(t,r){var i=this.matrix,l=i[t][r],u=this.height-1,n=this.width-1,s=this.varIndexByRow[t],o=this.varIndexByCol[r];this.varIndexByRow[t]=o,this.varIndexByCol[r]=s,this.rowByVarIndex[o]=t,this.rowByVarIndex[s]=-1,this.colByVarIndex[o]=-1,this.colByVarIndex[s]=r;for(var d=i[t],v=0,c=0;c<=n;c++)d[c]>=-1e-16&&d[c]<=1e-16?d[c]=0:(d[c]/=l,e[v]=c,v+=1);d[r]=1/l;var f,h,m;this.precision;for(var p=0;p<=u;p++)if(p!==t&&!(i[p][r]>=-1e-16&&i[p][r]<=1e-16)){var C=i[p];if(f=C[r],f>=-1e-16&&f<=1e-16)f!==0&&(C[r]=0);else{for(h=0;h<v;h++)c=e[h],m=d[c],m>=-1e-16&&m<=1e-16?m!==0&&(d[c]=0):C[c]=C[c]-f*m;C[r]=-f/l}}var w=this.optionalObjectives.length;if(w>0)for(var I=0;I<w;I+=1){var b=this.optionalObjectives[I].reducedCosts;if(f=b[r],f!==0){for(h=0;h<v;h++)c=e[h],m=d[c],m!==0&&(b[c]=b[c]-f*m);b[r]=-f/l}}},a.prototype.checkForCycles=function(t){for(var r=0;r<t.length-1;r++)for(var i=r+1;i<t.length;i++){var l=t[r],u=t[i];if(l[0]===u[0]&&l[1]===u[1]){if(i-r>t.length-i)break;for(var n=!0,s=1;s<i-r;s++){var o=t[r+s],d=t[i+s];if(o[0]!==d[0]||o[1]!==d[1]){n=!1;break}}if(n)return[r,i-r]}}return[]},Ct}var At={},nt,kt;function pt(){if(kt)return nt;kt=1;function a(n,s,o,d){this.id=n,this.cost=s,this.index=o,this.value=0,this.priority=d}function e(n,s,o,d){a.call(this,n,s,o,d)}e.prototype.isInteger=!0;function t(n,s){a.call(this,n,0,s,0)}t.prototype.isSlack=!0;function r(n,s){this.variable=n,this.coefficient=s}function i(n,s,o){return o===0||o==="required"?null:(s=s||1,o=o||1,n.isMinimization===!1&&(s=-s),n.addVariable(s,"r"+n.relaxationIndex++,!1,!1,o))}function l(n,s,o,d){this.slack=new t("s"+o,o),this.index=o,this.model=d,this.rhs=n,this.isUpperBound=s,this.terms=[],this.termsByVarIndex={},this.relaxation=null}l.prototype.addTerm=function(n,s){var o=s.index,d=this.termsByVarIndex[o];if(d===void 0)d=new r(s,n),this.termsByVarIndex[o]=d,this.terms.push(d),this.isUpperBound===!0&&(n=-n),this.model.updateConstraintCoefficient(this,s,n);else{var v=d.coefficient+n;this.setVariableCoefficient(v,s)}return this},l.prototype.removeTerm=function(n){return this},l.prototype.setRightHandSide=function(n){if(n!==this.rhs){var s=n-this.rhs;this.isUpperBound===!0&&(s=-s),this.rhs=n,this.model.updateRightHandSide(this,s)}return this},l.prototype.setVariableCoefficient=function(n,s){var o=s.index;if(o===-1){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var d=this.termsByVarIndex[o];if(d===void 0)this.addTerm(n,s);else if(n!==d.coefficient){var v=n-d.coefficient;this.isUpperBound===!0&&(v=-v),d.coefficient=n,this.model.updateConstraintCoefficient(this,s,v)}return this},l.prototype.relax=function(n,s){this.relaxation=i(this.model,n,s),this._relax(this.relaxation)},l.prototype._relax=function(n){n!==null&&(this.isUpperBound?this.setVariableCoefficient(-1,n):this.setVariableCoefficient(1,n))};function u(n,s){this.upperBound=n,this.lowerBound=s,this.model=n.model,this.rhs=n.rhs,this.relaxation=null}return u.prototype.isEquality=!0,u.prototype.addTerm=function(n,s){return this.upperBound.addTerm(n,s),this.lowerBound.addTerm(n,s),this},u.prototype.removeTerm=function(n){return this.upperBound.removeTerm(n),this.lowerBound.removeTerm(n),this},u.prototype.setRightHandSide=function(n){this.upperBound.setRightHandSide(n),this.lowerBound.setRightHandSide(n),this.rhs=n},u.prototype.relax=function(n,s){this.relaxation=i(this.model,n,s),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},nt={Constraint:l,Variable:a,IntegerVariable:e,SlackVariable:t,Equality:u,Term:r},nt}var Mt;function fi(){if(Mt)return At;Mt=1;var a=ve(),e=pt().SlackVariable;return a.prototype.addCutConstraints=function(t){for(var r=t.length,i=this.height,l=i+r,u=i;u<l;u+=1)this.matrix[u]===void 0&&(this.matrix[u]=this.matrix[u-1].slice());this.height=l,this.nVars=this.width+this.height-2;for(var n,s=this.width-1,o=0;o<r;o+=1){var d=t[o],v=i+o,c=d.type==="min"?-1:1,f=d.varIndex,h=this.rowByVarIndex[f],m=this.matrix[v];if(h===-1){for(m[this.rhsColumn]=c*d.value,n=1;n<=s;n+=1)m[n]=0;m[this.colByVarIndex[f]]=c}else{var p=this.matrix[h],C=p[this.rhsColumn];for(m[this.rhsColumn]=c*(d.value-C),n=1;n<=s;n+=1)m[n]=-c*p[n]}var w=this.getNewElementIndex();this.varIndexByRow[v]=w,this.rowByVarIndex[w]=v,this.colByVarIndex[w]=-1,this.variablesPerIndex[w]=new e("s"+w,w),this.nVars+=1}},a.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var r=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[t]];if(!i.isInteger)return!1;var l=r[t][this.rhsColumn],u=l-Math.floor(l);if(u<this.precision||1-this.precision<u)return!1;var n=this.height;r[n]=r[n-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[n]=s,this.rowByVarIndex[s]=n,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),r[n][this.rhsColumn]=Math.floor(l);for(var o=1;o<this.varIndexByCol.length;o+=1){var d=this.variablesPerIndex[this.varIndexByCol[o]];if(!d.isInteger)r[n][o]=Math.min(0,r[t][o]/(1-u));else{var v=r[t][o],c=Math.floor(v)+Math.max(0,v-Math.floor(v)-u)/(1-u);r[n][o]=c}}for(var f=0;f<this.width;f+=1)r[n][f]-=r[t][f];return!0},a.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var r=this.matrix,i=this.variablesPerIndex[this.varIndexByRow[t]];if(!i.isInteger)return!1;var l=r[t][this.rhsColumn],u=l-Math.floor(l);if(u<this.precision||1-this.precision<u)return!1;var n=this.height;r[n]=r[n-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[n]=s,this.rowByVarIndex[s]=n,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),r[n][this.rhsColumn]=-u;for(var o=1;o<this.varIndexByCol.length;o+=1){var d=this.variablesPerIndex[this.varIndexByCol[o]],v=r[t][o],c=v-Math.floor(v);d.isInteger?c<=u?r[n][o]=-c:r[n][o]=-(1-c)*u/c:v>=0?r[n][o]=-v:r[n][o]=v*u/(1-u)}return!0},a.prototype.applyMIRCuts=function(){},At}var zt={},Ot;function mi(){if(Ot)return zt;Ot=1;var a=ve();return a.prototype._putInBase=function(e){var t=this.rowByVarIndex[e];if(t===-1){for(var r=this.colByVarIndex[e],i=1;i<this.height;i+=1){var l=this.matrix[i][r];if(l<-this.precision||this.precision<l){t=i;break}}this.pivot(t,r)}return t},a.prototype._takeOutOfBase=function(e){var t=this.colByVarIndex[e];if(t===-1){for(var r=this.rowByVarIndex[e],i=this.matrix[r],l=1;l<this.height;l+=1){var u=i[l];if(u<-this.precision||this.precision<u){t=l;break}}this.pivot(r,t)}return t},a.prototype.updateVariableValues=function(){for(var e=this.variables.length,t=Math.round(1/this.precision),r=0;r<e;r+=1){var i=this.variables[r],l=i.index,u=this.rowByVarIndex[l];if(u===-1)i.value=0;else{var n=this.matrix[u][this.rhsColumn];i.value=Math.round((n+Number.EPSILON)*t)/t}}},a.prototype.updateRightHandSide=function(e,t){var r=this.height-1,i=this.rowByVarIndex[e.index];if(i===-1){for(var l=this.colByVarIndex[e.index],u=0;u<=r;u+=1){var n=this.matrix[u];n[this.rhsColumn]-=t*n[l]}var s=this.optionalObjectives.length;if(s>0)for(var o=0;o<s;o+=1){var d=this.optionalObjectives[o].reducedCosts;d[this.rhsColumn]-=t*d[l]}}else this.matrix[i][this.rhsColumn]-=t},a.prototype.updateConstraintCoefficient=function(e,t,r){if(e.index===t.index)throw new Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var i=this._putInBase(e.index),l=this.colByVarIndex[t.index];if(l===-1)for(var u=this.rowByVarIndex[t.index],n=0;n<this.width;n+=1)this.matrix[i][n]+=r*this.matrix[u][n];else this.matrix[i][l]-=r},a.prototype.updateCost=function(e,t){var r=e.index,i=this.width-1,l=this.colByVarIndex[r];if(l===-1){var u=this.matrix[this.rowByVarIndex[r]],n;if(e.priority===0){var s=this.matrix[0];for(n=0;n<=i;n+=1)s[n]+=t*u[n]}else{var o=this.objectivesByPriority[e.priority].reducedCosts;for(n=0;n<=i;n+=1)o[n]+=t*u[n]}}else this.matrix[0][l]-=t},a.prototype.addConstraint=function(e){var t=e.isUpperBound?1:-1,r=this.height,i=this.matrix[r];i===void 0&&(i=this.matrix[0].slice(),this.matrix[r]=i);for(var l=this.width-1,u=0;u<=l;u+=1)i[u]=0;i[this.rhsColumn]=t*e.rhs;for(var n=e.terms,s=n.length,o=0;o<s;o+=1){var d=n[o],v=d.coefficient,c=d.variable.index,f=this.rowByVarIndex[c];if(f===-1)i[this.colByVarIndex[c]]+=t*v;else{var h=this.matrix[f];for(h[this.rhsColumn],u=0;u<=l;u+=1)i[u]-=t*v*h[u]}}var m=e.index;this.varIndexByRow[r]=m,this.rowByVarIndex[m]=r,this.colByVarIndex[m]=-1,this.height+=1},a.prototype.removeConstraint=function(e){var t=e.index,r=this.height-1,i=this._putInBase(t),l=this.matrix[r];this.matrix[r]=this.matrix[i],this.matrix[i]=l,this.varIndexByRow[i]=this.varIndexByRow[r],this.varIndexByRow[r]=-1,this.rowByVarIndex[t]=-1,this.availableIndexes[this.availableIndexes.length]=t,e.slack.index=-1,this.height-=1},a.prototype.addVariable=function(e){var t=this.height-1,r=this.width,i=this.model.isMinimization===!0?-e.cost:e.cost,l=e.priority,u=this.optionalObjectives.length;if(u>0)for(var n=0;n<u;n+=1)this.optionalObjectives[n].reducedCosts[r]=0;l===0?this.matrix[0][r]=i:(this.setOptionalObjective(l,r,i),this.matrix[0][r]=0);for(var s=1;s<=t;s+=1)this.matrix[s][r]=0;var o=e.index;this.varIndexByCol[r]=o,this.rowByVarIndex[o]=-1,this.colByVarIndex[o]=r,this.width+=1},a.prototype.removeVariable=function(e){var t=e.index,r=this._takeOutOfBase(t),i=this.width-1;if(r!==i){for(var l=this.height-1,u=0;u<=l;u+=1){var n=this.matrix[u];n[r]=n[i]}var s=this.optionalObjectives.length;if(s>0)for(var o=0;o<s;o+=1){var d=this.optionalObjectives[o].reducedCosts;d[r]=d[i]}var v=this.varIndexByCol[i];this.varIndexByCol[r]=v,this.colByVarIndex[v]=r}this.varIndexByCol[i]=-1,this.colByVarIndex[t]=-1,this.availableIndexes[this.availableIndexes.length]=t,e.index=-1,this.width-=1},zt}var Pt={},Tt;function gi(){if(Tt)return Pt;Tt=1;var a=ve();return a.prototype.log=function(e,t){console.log("****",e,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var r=5,i="",l=[" "],u,n,s,o,d,v,c,f,h,m,p;for(n=1;n<this.width;n+=1)d=this.varIndexByCol[n],o=this.variablesPerIndex[d],o===void 0?v="c"+d:v=o.id,c=v.length,f=" ",h="	",c>5?f+=" ":h+="	",l[n]=f,i+=h+v;console.log(i);var C,w=this.matrix[this.costRowIndex],I="	";for(u=1;u<this.width;u+=1)C="	",I+=C,I+=l[u],I+=w[u].toFixed(r);for(C="	",I+=C+l[0]+w[0].toFixed(r),console.log(I+"	Z"),s=1;s<this.height;s+=1){for(m=this.matrix[s],p="	",n=1;n<this.width;n+=1)C="	",p+=C+l[n]+m[n].toFixed(r);C="	",p+=C+l[0]+m[0].toFixed(r),d=this.varIndexByRow[s],o=this.variablesPerIndex[d],o===void 0?v="c"+d:v=o.id,console.log(p+"	"+v)}console.log("");var b=this.optionalObjectives.length;if(b>0){console.log("    Optional objectives:");for(var E=0;E<b;E+=1){var z=this.optionalObjectives[E].reducedCosts,k="";for(u=1;u<this.width;u+=1)C=z[u]<0?"":" ",k+=C,k+=l[u],k+=z[u].toFixed(r);C=z[0]<0?"":" ",k+=C+l[0]+z[0].toFixed(r),console.log(k+" z"+E)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this},Pt}var Rt={},Ut;function pi(){if(Ut)return Rt;Ut=1;var a=ve();return a.prototype.copy=function(){var e=new a(this.precision);e.width=this.width,e.height=this.height,e.nVars=this.nVars,e.model=this.model,e.variables=this.variables,e.variablesPerIndex=this.variablesPerIndex,e.unrestrictedVars=this.unrestrictedVars,e.lastElementIndex=this.lastElementIndex,e.varIndexByRow=this.varIndexByRow.slice(),e.varIndexByCol=this.varIndexByCol.slice(),e.rowByVarIndex=this.rowByVarIndex.slice(),e.colByVarIndex=this.colByVarIndex.slice(),e.availableIndexes=this.availableIndexes.slice();for(var t=[],r=0;r<this.optionalObjectives.length;r++)t[r]=this.optionalObjectives[r].copy();e.optionalObjectives=t;for(var i=this.matrix,l=new Array(this.height),u=0;u<this.height;u++)l[u]=i[u].slice();return e.matrix=l,e},a.prototype.save=function(){this.savedState=this.copy()},a.prototype.restore=function(){if(this.savedState!==null){var e=this.savedState,t=e.matrix;this.nVars=e.nVars,this.model=e.model,this.variables=e.variables,this.variablesPerIndex=e.variablesPerIndex,this.unrestrictedVars=e.unrestrictedVars,this.lastElementIndex=e.lastElementIndex,this.width=e.width,this.height=e.height;var r,i;for(r=0;r<this.height;r+=1){var l=t[r],u=this.matrix[r];for(i=0;i<this.width;i+=1)u[i]=l[i]}var n=e.varIndexByRow;for(i=0;i<this.height;i+=1)this.varIndexByRow[i]=n[i];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var s=e.varIndexByCol;for(r=0;r<this.width;r+=1)this.varIndexByCol[r]=s[r];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var o=e.rowByVarIndex,d=e.colByVarIndex,v=0;v<this.nVars;v+=1)this.rowByVarIndex[v]=o[v],this.colByVarIndex[v]=d[v];if(e.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var c=0;c<e.optionalObjectives.length;c++){var f=e.optionalObjectives[c].copy();this.optionalObjectives[c]=f,this.optionalObjectivePerPriority[f.priority]=f}}}},Rt}var qt={},jt;function xi(){if(jt)return qt;jt=1;var a=ve();function e(t,r){this.index=t,this.value=r}return a.prototype.getMostFractionalVar=function(){for(var t=0,r=null,i=null,l=this.model.integerVariables,u=l.length,n=0;n<u;n++){var s=l[n].index,o=this.rowByVarIndex[s];if(o!==-1){var d=this.matrix[o][this.rhsColumn],v=Math.abs(d-Math.round(d));t<v&&(t=v,r=s,i=d)}}return new e(r,i)},a.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,r=null,i=null,l=this.model.integerVariables,u=l.length,n=0;n<u;n++){var s=l[n],o=s.index,d=this.rowByVarIndex[o];if(d!==-1){var v=this.matrix[d][this.rhsColumn];if(Math.abs(v-Math.round(v))>this.precision){var c=s.cost;t>c&&(t=c,r=o,i=v)}}}return new e(r,i)},qt}var Ft={},Lt;function bi(){if(Lt)return Ft;Lt=1;var a=ve();return a.prototype.countIntegerValues=function(){for(var e=0,t=1;t<this.height;t+=1)if(this.variablesPerIndex[this.varIndexByRow[t]].isInteger){var r=this.matrix[t][this.rhsColumn];r=r-Math.floor(r),r<this.precision&&-r<this.precision&&(e+=1)}return e},a.prototype.isIntegral=function(){for(var e=this.model.integerVariables,t=e.length,r=0;r<t;r++){var i=this.rowByVarIndex[e[r].index];if(i!==-1){var l=this.matrix[i][this.rhsColumn];if(Math.abs(l-Math.round(l))>this.precision)return!1}}return!0},a.prototype.computeFractionalVolume=function(e){for(var t=-1,r=1;r<this.height;r+=1)if(this.variablesPerIndex[this.varIndexByRow[r]].isInteger){var i=this.matrix[r][this.rhsColumn];i=Math.abs(i);var l=Math.min(i-Math.floor(i),Math.floor(i+1));if(l<this.precision){if(!e)return 0}else t===-1?t=i:t*=i}return t===-1?0:t},Ft}var at,Dt;function yi(){return Dt||(Dt=1,hi(),fi(),mi(),gi(),pi(),xi(),bi(),at=ve()),at}var Ht={},Jt;function xr(){if(Jt)return Ht;Jt=1;var a=ve();function e(i,l,u){this.type=i,this.varIndex=l,this.value=u}function t(i,l){this.relaxedEvaluation=i,this.cuts=l}function r(i,l){return l.relaxedEvaluation-i.relaxedEvaluation}return a.prototype.applyCuts=function(i){if(this.restore(),this.addCutConstraints(i),this.simplex(),this.model.useMIRCuts)for(var l=!0;l;){var u=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex();var n=this.computeFractionalVolume(!0);n>=.9*u&&(l=!1)}},a.prototype.branchAndCut=function(){var i=[],l=0,u=this.model.tolerance,n=!0,s=1e99;this.model.timeout&&(s=Date.now()+this.model.timeout);for(var o=1/0,d=null,v=[],c=0;c<this.optionalObjectives.length;c+=1)v.push(1/0);var f=new t(-1/0,[]),h;for(i.push(f);i.length>0&&n===!0&&Date.now()<s;)if(this.model.isMinimization?h=this.bestPossibleEval*(1+u):h=this.bestPossibleEval*(1-u),u>0&&o<h&&(n=!1),f=i.pop(),!(f.relaxedEvaluation>o)){var m=f.cuts;if(this.applyCuts(m),l++,this.feasible!==!1){var p=this.evaluation;if(!(p>o)){if(p===o){for(var C=!0,w=0;w<this.optionalObjectives.length&&!(this.optionalObjectives[w].reducedCosts[0]>v[w]);w+=1)if(this.optionalObjectives[w].reducedCosts[0]<v[w]){C=!1;break}if(C)continue}if(this.isIntegral()===!0){if(this.__isIntegral=!0,l===1){this.branchAndCutIterations=l;return}d=f,o=p;for(var I=0;I<this.optionalObjectives.length;I+=1)v[I]=this.optionalObjectives[I].reducedCosts[0]}else{l===1&&this.save();for(var b=this.getMostFractionalVar(),E=b.index,z=[],k=[],A=m.length,P=0;P<A;P+=1){var T=m[P];T.varIndex===E?T.type==="min"?k.push(T):z.push(T):(z.push(T),k.push(T))}var j=Math.ceil(b.value),L=Math.floor(b.value),R=new e("min",E,j);z.push(R);var _=new e("max",E,L);k.push(_),i.push(new t(p,z)),i.push(new t(p,k)),i.sort(r)}}}}d!==null&&this.applyCuts(d.cuts),this.branchAndCutIterations=l},Ht}var st,Zt;function _i(){if(Zt)return st;Zt=1;var a=ve();xr();var e=pt(),t=e.Constraint,r=e.Equality,i=e.Variable,l=e.IntegerVariable;e.Term;function u(n,s){this.tableau=new a(n),this.name=s,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}return st=u,u.prototype.minimize=function(){return this.isMinimization=!0,this},u.prototype.maximize=function(){return this.isMinimization=!1,this},u.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var n=this.lastElementIndex;return this.lastElementIndex+=1,n},u.prototype._addConstraint=function(n){var s=n.slack;this.tableau.variablesPerIndex[s.index]=s,this.constraints.push(n),this.nConstraints+=1,this.tableauInitialized===!0&&this.tableau.addConstraint(n)},u.prototype.smallerThan=function(n){var s=new t(n,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(s),s},u.prototype.greaterThan=function(n){var s=new t(n,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(s),s},u.prototype.equal=function(n){var s=new t(n,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(s);var o=new t(n,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(o),new r(s,o)},u.prototype.addVariable=function(n,s,o,d,v){if(typeof v=="string")switch(v){case"required":v=0;break;case"strong":v=1;break;case"medium":v=2;break;case"weak":v=3;break;default:v=0;break}var c=this.tableau.getNewElementIndex();s==null&&(s="v"+c),n==null&&(n=0),v==null&&(v=0);var f;return o?(f=new l(s,n,c,v),this.integerVariables.push(f)):f=new i(s,n,c,v),this.variables.push(f),this.tableau.variablesPerIndex[c]=f,d&&(this.unrestrictedVariables[c]=!0),this.nVariables+=1,this.tableauInitialized===!0&&this.tableau.addVariable(f),f},u.prototype._removeConstraint=function(n){var s=this.constraints.indexOf(n);if(s===-1){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(s,1),this.nConstraints-=1,this.tableauInitialized===!0&&this.tableau.removeConstraint(n),n.relaxation&&this.removeVariable(n.relaxation)},u.prototype.removeConstraint=function(n){return n.isEquality?(this._removeConstraint(n.upperBound),this._removeConstraint(n.lowerBound)):this._removeConstraint(n),this},u.prototype.removeVariable=function(n){var s=this.variables.indexOf(n);if(s===-1){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(s,1),this.tableauInitialized===!0&&this.tableau.removeVariable(n),this},u.prototype.updateRightHandSide=function(n,s){return this.tableauInitialized===!0&&this.tableau.updateRightHandSide(n,s),this},u.prototype.updateConstraintCoefficient=function(n,s,o){return this.tableauInitialized===!0&&this.tableau.updateConstraintCoefficient(n,s,o),this},u.prototype.setCost=function(n,s){var o=n-s.cost;return this.isMinimization===!1&&(o=-o),s.cost=n,this.tableau.updateCost(s,o),this},u.prototype.loadJson=function(n){this.isMinimization=n.opType!=="max";for(var s=n.variables,o=n.constraints,d={},v={},c=Object.keys(o),f=c.length,h=0;h<f;h+=1){var m=c[h],p=o[m],C=p.equal,w=p.weight,I=p.priority,b=w!==void 0||I!==void 0,E,z;if(C===void 0){var k=p.min;k!==void 0&&(E=this.greaterThan(k),d[m]=E,b&&E.relax(w,I));var A=p.max;A!==void 0&&(z=this.smallerThan(A),v[m]=z,b&&z.relax(w,I))}else{E=this.greaterThan(C),d[m]=E,z=this.smallerThan(C),v[m]=z;var P=new r(E,z);b&&P.relax(w,I)}}var T=Object.keys(s),j=T.length;this.tolerance=n.tolerance||0,n.timeout&&(this.timeout=n.timeout),n.options&&(n.options.timeout&&(this.timeout=n.options.timeout),this.tolerance===0&&(this.tolerance=n.options.tolerance||0),n.options.useMIRCuts&&(this.useMIRCuts=n.options.useMIRCuts),typeof n.options.exitOnCycles>"u"?this.checkForCycles=!0:this.checkForCycles=n.options.exitOnCycles);for(var L=n.ints||{},R=n.binaries||{},_=n.unrestricted||{},U=n.optimize,Y=0;Y<j;Y+=1){var V=T[Y],D=s[V],ye=D[U]||0,_e=!!R[V],fe=!!L[V]||_e,me=!!_[V],ge=this.addVariable(ye,V,fe,me);_e&&this.smallerThan(1).addTerm(1,ge);var de=Object.keys(D);for(h=0;h<de.length;h+=1){var se=de[h];if(se!==U){var we=D[se],pe=d[se];pe!==void 0&&pe.addTerm(we,ge);var Ie=v[se];Ie!==void 0&&Ie.addTerm(we,ge)}}}return this},u.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},u.prototype.solve=function(){return this.tableauInitialized===!1&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},u.prototype.isFeasible=function(){return this.tableau.feasible},u.prototype.save=function(){return this.tableau.save()},u.prototype.restore=function(){return this.tableau.restore()},u.prototype.activateMIRCuts=function(n){this.useMIRCuts=n},u.prototype.debug=function(n){this.checkForCycles=n},u.prototype.log=function(n){return this.tableau.log(n)},st}var ot={},Yt;function wi(){return Yt||(Yt=1,ot.CleanObjectiveAttributes=function(a){var e,t,r;if(typeof a.optimize=="string")if(a.constraints[a.optimize]){e=Math.random();for(t in a.variables)a.variables[t][a.optimize]&&(a.variables[t][e]=a.variables[t][a.optimize]);return a.constraints[e]=a.constraints[a.optimize],delete a.constraints[a.optimize],a}else return a;else{for(r in a.optimize)if(a.constraints[r])if(a.constraints[r]==="equal")delete a.optimize[r];else{e=Math.random();for(t in a.variables)a.variables[t][r]&&(a.variables[t][e]=a.variables[t][r]);a.constraints[e]=a.constraints[r],delete a.constraints[r]}return a}}),ot}var He={},lt,Wt;function ht(){if(Wt)return lt;Wt=1;function a(t){var r={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},i={opType:"",optimize:"_obj",constraints:{},variables:{}},l={">=":"min","<=":"max","=":"equal"},u="",n=null,s="",o="",d="",v=0;typeof t=="string"&&(t=t.split(`
`));for(var c=0;c<t.length;c++)if(d="__"+c,u=t[c],n=null,r.is_objective.test(u))i.opType=u.match(/(max|min)/gi)[0],n=u.match(r.parse_lhs).map(function(m){return m.replace(/\s+/,"")}).slice(1),n.forEach(function(m){s=m.match(r.get_num),s===null?m.substr(0,1)==="-"?s=-1:s=1:s=s[0],s=parseFloat(s),o=m.match(r.get_word)[0].replace(/\;$/,""),i.variables[o]=i.variables[o]||{},i.variables[o]._obj=s});else if(r.is_int.test(u))n=u.match(r.parse_int).slice(1),i.ints=i.ints||{},n.forEach(function(m){m=m.replace(";",""),i.ints[m]=1});else if(r.is_bin.test(u))n=u.match(r.parse_bin).slice(1),i.binaries=i.binaries||{},n.forEach(function(m){m=m.replace(";",""),i.binaries[m]=1});else if(r.is_constraint.test(u)){var f=u.indexOf(":"),h=f===-1?u:u.slice(f+1);n=h.match(r.parse_lhs).map(function(m){return m.replace(/\s+/,"")}),n.forEach(function(m){s=m.match(r.get_num),s===null?m.substr(0,1)==="-"?s=-1:s=1:s=s[0],s=parseFloat(s),o=m.match(r.get_word)[0],i.variables[o]=i.variables[o]||{},i.variables[o][d]=s}),v=parseFloat(u.match(r.parse_rhs)[0]),u=l[u.match(r.parse_dir)[0]],i.constraints[d]=i.constraints[d]||{},i.constraints[d][u]=v}else r.is_unrestricted.test(u)&&(n=u.match(r.parse_int).slice(1),i.unrestricted=i.unrestricted||{},n.forEach(function(m){m=m.replace(";",""),i.unrestricted[m]=1}));return i}function e(t){if(!t)throw new Error("Solver requires a model to operate on");var r="",i={max:"<=",min:">=",equal:"="},l=new RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(t.opType){r+=t.opType+":";for(var u in t.variables)t.variables[u][u]=t.variables[u][u]?t.variables[u][u]:1,t.variables[u][t.optimize]&&(r+=" "+t.variables[u][t.optimize]+" "+u.replace(l,"_"))}else r+="max:";r+=`;

`;for(var n in t.constraints)for(var s in t.constraints[n])if(typeof i[s]<"u"){for(var o in t.variables)typeof t.variables[o][n]<"u"&&(r+=" "+t.variables[o][n]+" "+o.replace(l,"_"));r+=" "+i[s]+" "+t.constraints[n][s],r+=`;
`}if(t.ints){r+=`

`;for(var d in t.ints)r+="int "+d.replace(l,"_")+`;
`}if(t.unrestricted){r+=`

`;for(var v in t.unrestricted)r+="unrestricted "+v.replace(l,"_")+`;
`}return r}return lt=function(t){return t.length?a(t):e(t)},lt}const Ii={},Si=Object.freeze(Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"})),Xt=li(Si);var Gt;function Ci(){if(Gt)return He;Gt=1,He.reformat=ht();function a(e){return e=e.replace("\\r\\n",`\r
`),e=e.split(`\r
`),e=e.filter(function(t){var r;return r=new RegExp(" 0$","gi"),!(r.test(t)===!0||(r=new RegExp("\\d$","gi"),r.test(t)===!1))}).map(function(t){return t.split(/\:{0,1} +(?=\d)/)}).reduce(function(t,r,i){return t[r[0]]=r[1],t},{}),e}return He.solve=function(e){return new Promise(function(t,r){typeof window<"u"&&r("Function Not Available in Browser");var i=ht()(e);e.external||r("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),e.external.binPath||r("No Executable | Binary path provided in arguments as 'binPath'"),e.external.args||r("No arguments array for cli | bash provided on 'args' attribute"),e.external.tempName||r("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on");var l=Xt;l.writeFile(e.external.tempName,i,function(u,n){if(u)r(u);else{var s=Xt.execFile;e.external.args.push(e.external.tempName),s(e.external.binPath,e.external.args,function(o,d){if(o)if(o.code===1)t(a(d));else{var v={"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"},c={code:o.code,meaning:v[o.code],data:d};r(c)}else t(a(d))})}})})},He}var ut,Kt;function Ei(){return Kt||(Kt=1,ut={lpsolve:Ci()}),ut}var vt,Qt;function $t(){return Qt||(Qt=1,vt=function(a,e){var t=e.optimize,r=JSON.parse(JSON.stringify(e.optimize)),i=Object.keys(e.optimize),l,u=0,n={},s="",o={},d=[],v,c,f,h;for(delete e.optimize,v=0;v<i.length;v++)r[i[v]]=0;for(v=0;v<i.length;v++){e.optimize=i[v],e.opType=t[i[v]],l=a.Solve(e,void 0,void 0,!0);for(h in i)if(!e.variables[i[h]]){l[i[h]]=l[i[h]]?l[i[h]]:0;for(f in e.variables)e.variables[f][i[h]]&&l[f]&&(l[i[h]]+=l[f]*e.variables[f][i[h]])}for(s="base",c=0;c<i.length;c++)l[i[c]]?s+="-"+(l[i[c]]*1e3|0)/1e3:s+="-0";if(!n[s]){for(n[s]=1,u++,c=0;c<i.length;c++)l[i[c]]&&(r[i[c]]+=l[i[c]]);delete l.feasible,delete l.result,d.push(l)}}for(v=0;v<i.length;v++)e.constraints[i[v]]={equal:r[i[v]]/u};e.optimize="cheater-"+Math.random(),e.opType="max";for(v in e.variables)e.variables[v].cheater=1;for(v in d)for(f in d[v])o[f]=o[f]||{min:1e99,max:-1e99};for(v in o)for(f in d)d[f][v]?(d[f][v]>o[v].max&&(o[v].max=d[f][v]),d[f][v]<o[v].min&&(o[v].min=d[f][v])):(d[f][v]=0,o[v].min=0);return l=a.Solve(e,void 0,void 0,!0),{midpoint:l,vertices:d,ranges:o}}),vt}var dt,er;function Bi(){if(er)return dt;er=1;var a=yi(),e=_i(),t=xr(),r=pt(),i=wi(),l=r.Constraint,u=r.Variable,n=r.Numeral,s=r.Term,o=Ei(),d=function(){this.Model=e,this.branchAndCut=t,this.Constraint=l,this.Variable=u,this.Numeral=n,this.Term=s,this.Tableau=a,this.lastSolvedModel=null,this.External=o,this.Solve=function(v,c,f,h){if(h)for(var m in i)v=i[m](v);if(!v)throw new Error("Solver requires a model to operate on");if(typeof v.optimize=="object"&&Object.keys(v.optimize>1))return $t()(this,v);if(v.external){var p=Object.keys(o);if(p=JSON.stringify(p),!v.external.solver)throw new Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+p);if(!o[v.external.solver])throw new Error("No support (yet) for "+v.external.solver+". Please use one of these instead:"+p);return o[v.external.solver].solve(v)}else{v instanceof e||(v=new e(c).loadJson(v));var C=v.solve();if(this.lastSolvedModel=v,C.solutionSet=C.generateSolutionSet(),f)return C;var w={};return w.feasible=C.feasible,w.result=C.evaluation,w.bounded=C.bounded,C._tableau.__isIntegral&&(w.isIntegral=!0),Object.keys(C.solutionSet).forEach(function(I){C.solutionSet[I]!==0&&(w[I]=C.solutionSet[I])}),w}},this.ReformatLP=ht(),this.MultiObjective=function(v){return $t()(this,v)}};return typeof window=="object"?window.solver=new d:typeof self=="object"&&(self.solver=new d),dt=new d,dt}var Vi=Bi();const tr=oi(Vi),Je=["g","mg","μg / mcg"],br=["L","mL"],rr=["capsule","liquid","powder","tablet"],Q={g:1,mg:.001,"μg / mcg":1e-6,L:1,mL:.001};function Ni(a,e){a.push({id:a.length,name:e,nutrients:[],products:[]}),yr(a[a.length-1].nutrients),_r(a[a.length-1].products)}function yr(a){a.push({id:a.length,name:"",amount:-1,unit:""})}function _r(a){a.push({id:a.length,name:"",form:"",totalAmount:-1,totalUnits:"",serveSize:-1,serveUnits:"",price:0,ingredients:[]}),wr(a[a.length-1].ingredients)}function wr(a){a.push({id:a.length,name:"",amountPerServe:-1,unit:""})}const ze={addArrayEntry(a,e,t){if(!Object.hasOwn(a,e[0]))throw new Error(`Property '${e[0]}' does not exist.`);if(Array.isArray(a[e[0]]))if(e.length==1)switch(e[0]){case"solutions":Ni(a[e[0]],t);break;case"nutrients":yr(a[e[0]]);break;case"products":_r(a[e[0]]);break;case"ingredients":wr(a[e[0]]);break}else this.addArrayEntry(a[e[0]],e.slice(1),t);else this.addArrayEntry(a[e[0]],e.slice(1),t);e[e.length-1]=="solutions"&&(a.selected=a.solutions.length-1)},deleteArrayEntry(a,e,t){if(!Object.hasOwn(a,e[0]))throw new Error(`Property '${e[0]}' does not exist.`);Array.isArray(a[e[0]])?e.length==1?queueMicrotask(()=>{a[e[0]].splice(t,1),a[e[0]].forEach((r,i)=>{r.id=i}),e[0]=="solutions"&&a.selected!=0&&(a.selected-=1)}):this.deleteArrayEntry(a[e[0]],e.slice(1),t):this.deleteArrayEntry(a[e[0]],e.slice(1),t)},fromJSON(a){return{selected:Number(a.selected),solutions:(()=>{let t=[];return a.solutions.forEach((r,i)=>{t.push({id:r.id,name:r.name,nutrients:(()=>{let l=[];return a.solutions[i].nutrients.forEach(u=>{l.push({id:u.id,name:u.name,amount:u.amount,unit:u.unit})}),l})(),products:(()=>{let l=[];return a.solutions[i].products.forEach((u,n)=>{l.push({id:u.id,name:u.name,form:u.form,totalAmount:u.totalAmount,totalUnits:u.totalUnits,serveSize:u.serveSize,serveUnits:u.serveUnits,price:u.price,ingredients:(()=>{let s=[];return a.solutions[i].products[n].ingredients.forEach(o=>{s.push({id:o.id,name:o.name,amountPerServe:o.amountPerServe,unit:o.unit})}),s})()})}),l})()})}),t})()}},toJSON(a){const e={selected:a.selected,solutions:[]};return a.solutions.forEach((t,r)=>{e.solutions.push({id:t.id,name:t.name,nutrients:[],products:[]}),t.nutrients.forEach(i=>{e.solutions[r].nutrients.push({id:i.id,name:i.name,amount:i.amount,unit:i.unit})}),t.products.forEach((i,l)=>{e.solutions[r].products.push({id:i.id,name:i.name,form:i.form,totalAmount:i.totalAmount,totalUnits:i.totalUnits,serveSize:i.serveSize,serveUnits:i.serveUnits,unit:i.unit,price:i.price,ingredients:[]}),i.ingredients.forEach(u=>{e.solutions[r].products[l].ingredients.push({id:u.id,name:u.name,amountPerServe:u.amountPerServe,unit:u.unit})})})}),JSON.stringify(e)},setExampleData(a){return a.solutions.push({id:0,name:"Example",nutrients:[{id:0,name:"Potassium",amount:1.5,unit:"g"},{id:1,name:"Magnesium",amount:260,unit:"mg"},{id:2,name:"Sodium",amount:2,unit:"g"}],products:[{id:0,name:"Potassium Chloride",form:"powder",totalAmount:227,totalUnits:"g",serveSize:700,serveUnits:"mg",price:10,ingredients:[{id:0,name:"Potassium",amountPerServe:363,unit:"mg"},{id:1,name:"Magnesium",amountPerServe:7,unit:"mg"}]},{id:1,name:"Magnesium Glycinate 750mg",form:"capsule",totalAmount:120,totalUnits:"",serveSize:1,serveUnits:"",price:40,ingredients:[{id:0,name:"Magnesium",amountPerServe:150,unit:"mg"}]},{id:2,name:"Sodii",form:"powder",totalAmount:177,totalUnits:"g",serveSize:5.9,serveUnits:"g",price:64,ingredients:[{id:0,name:"Sodium",amountPerServe:1e3,unit:"mg"},{id:1,name:"Potassium",amountPerServe:210,unit:"mg"},{id:2,name:"Magnesium",amountPerServe:70,unit:"mg"}]}]}),a},updateData(a,e,t){if(!Object.hasOwn(a,e[0]))throw new Error(`Property '${e[0]}' does not exist.`);Array.isArray(a[e[0]])||typeof a[e[0]]=="object"?this.updateData(a[e[0]],e.slice(1),t):a[e[0]]=t},updateSolutionResults(a){if(a.solutions.length==0)return null;let e=[],t=[];for(const o of a.solutions[a.selected].nutrients)o.name==""||o.amount<=0||o.unit==""||(e.push(o.name),t.push(o.amount*Q[o.unit]*1e6));if(e.length==0)return null;let r=[],i=[],l=[],u=[];for(const o of a.solutions[a.selected].products)o.name==""||o.form==""||o.totalAmount<=0||o.serveSize<=0||o.form!="capsule"&&o.form!="tablet"&&(o.serveUnits==""||o.totalUnits=="")||o.ingredients.length==1&&(o.ingredients[0].name==""||o.ingredients[0].amountPerServe<=0||o.ingredients[0].unit=="")||(l.push(o.totalAmount),i.push(o.form=="capsule"||o.form=="tablet"?1:o.serveSize*Q[o.serveUnits]),u.push(o.form),r.push({name:o.name,nutrient:(()=>{let d=Array(e.length).fill(0);for(const v of o.ingredients){const c=e.indexOf(v.name);c<0||(d[c]=v.amountPerServe*Q[v.unit]*1e6)}return d})(),price:o.price*(o.serveSize*Q[o.serveUnits!=""?o.serveUnits:"g"])/(o.totalAmount*Q[o.totalUnits!=""?o.totalUnits:"g"])}));if(r.length==0)return null;const n=Ai(r,t);console.log(n);const s=[];for(const[o,d]of n.entries()){s.push({bounded:d?d.bounded:!1,feasible:d?d.feasible:!1,price:0,products:[],nutrients:[]});for(const v of a.solutions[a.selected].nutrients)v.name!=""&&s[o].nutrients.push({name:v.name,requirement:!0,amount:0,unit:v.unit,targetDifference:0,targetUnit:""});try{if(!d||!d.feasible)throw new Error(`UNFEASIBLE ${o}`);if(!d.bounded)throw new Error(`UNREALISTIC ${o}`);for(const[v,c]of Object.entries(n[o])){if(!v.includes("product"))continue;const f=Number(v.replace("product","")),h=a.solutions[a.selected].products[f],m=h.form=="capsule"||h.form=="tablet"?c*h.serveSize:c*h.serveSize*Q[h.serveUnits],p=Re(m,h.form),C=h.form=="capsule"||h.form=="tablet"?m:m/Q[p],w=h.form=="capsule"||h.form=="tablet"?h.totalAmount/m:h.totalAmount*Q[h.totalUnits]/m;s[o].price+=h.form=="capsule"||h.form=="tablet"?c*h.price*h.serveSize/h.totalAmount:c*h.price*(h.serveSize*Q[h.serveUnits])/(h.totalAmount*Q[h.totalUnits]),console.log(f,h.name,c,"Amt:",m,"TotAmt:",w,p),s[o].products.push({name:h.name,amount:Math.round((C+Number.EPSILON)*100)/100,serve:Math.round((c+Number.EPSILON)*100)/100,unit:p,totalServe:Math.round((w+Number.EPSILON)*100)/100});for(const I of h.ingredients){const b=Number(e.indexOf(I.name));for(const E of s[o].nutrients)I.name==E.name&&(E.amount+=c*I.amountPerServe*Q[I.unit]);b<0&&s[o].nutrients.push({name:I.name,requirement:!1,amount:c*I.amountPerServe*Q[I.unit],unit:I.unit=="mL"||I.unit=="L"?"L":"g",targetDifference:null,targetUnit:""})}}for(const v of s[o].nutrients){v.unit=="L"||v.unit=="mL"?v.unit=Re(v.amount,"liquid"):v.unit=Re(v.amount,"powder");const c=Number(e.indexOf(v.name)),f=v.amount-t[c]/1e6;v.unit=="L"||v.unit=="mL"?v.targetUnit=Re(f,"liquid"):v.targetUnit=Re(f,"powder"),console.log(v.name,v.amount,t[c]/1e6,f,Q[v.targetUnit]),v.amount=Math.round((v.amount/Q[v.unit]+Number.EPSILON)*100)/100,v.targetDifference=Math.round((f/Q[v.targetUnit]+Number.EPSILON)*100)/100}}catch(v){v instanceof Error&&(v.message=="UNFEASIBLE"&&(s[s.length-1].feasible=!1),v.message=="UNREALISTIC"&&(s[s.length-1].bounded=!1))}}return s}};function Re(a,e){switch(e){case"powder":return Math.abs(a)<1?Math.abs(a)<.001?"μg / mcg":"mg":"g";case"liquid":return Math.abs(a)<1?"mL":"L";case"capsule":case"tablet":return Math.abs(a)==1?e.substring(0,3):`${e.substring(0,3)}s`;default:throw new Error("Unknown form provided to determineFinalDecimalsAndUnits.")}}function Ai(a,e){console.log(e,a);const t=ir(a,e,!1),r=tr.Solve(t);if(!r.feasible||!r.bounded)return[r,null];const i=ir(a,e,!0,.01),l=tr.Solve(i);return[r,l]}function ir(a,e,t=!1,r=.01){const i={optimize:t?"cost":"deviationSum",opType:"min",constraints:{},variables:{}};return a.forEach((l,u)=>{const n=`product${u}`;i.variables[n]={cost:l.price,deviationSum:0},e.forEach((s,o)=>{const d=`nutrient${o}`;i.variables[n][d]=l.nutrient[o]})}),e.forEach((l,u)=>{const n=`nutrient${u}`;if(t)i.constraints[n]={min:l*(1-r),max:l*(1+r)};else{i.constraints[n]={equal:l};const s=`plusDev${u}`,o=`minusDev${u}`;i.variables[s]={[n]:1,cost:0,deviationSum:1},i.variables[o]={[n]:-1,cost:0,deviationSum:1}}}),i}var ki=M("<span> </span>"),Mi=M('<div class="my-3"><!> <p class="text-center text-md flex justify-center items-center gap-3">Sol Amount: <span class="text-3xl text-accent"> </span></p> <p class="text-center text-md flex justify-center items-center gap-3">Req Difference: <!></p></div>');function zi(a,e){$(e,!0);var t=Mi(),r=S(t);K(r,{type:"h3",center:!0,get title(){return e.nutrient.name}});var i=y(r,2),l=y(S(i)),u=S(l);x(l),x(i);var n=y(i,2),s=y(S(n));{var o=v=>{var c=ki(),f=S(c,!0);x(c),J((h,m)=>{ne(c,1,`text-center text-3xl ${h??""}`),H(f,m)},[()=>Number(e.nutrient.targetDifference)>=0?"text-success":"text-error",()=>Number(e.nutrient.targetDifference)!=0?`${Math.abs(e.nutrient.targetDifference)} ${e.nutrient.targetUnit} ${e.nutrient.targetDifference>=0?"over":"under"}`:"exact"]),N(v,c)},d=v=>{var c=ar("extra");N(v,c)};O(s,v=>{e.nutrient.requirement?v(o):v(d,!1)})}x(n),x(t),J(()=>H(u,`${e.nutrient.amount??""} ${e.nutrient.unit??""}`)),N(a,t),ee()}var Oi=Er('<svg class="fill-accent lg:transition transition-discrete transform hover:scale-y-110 hover:scale-x-110 w-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2Zm4.78 7.7-5.67 5.67a.75.75 0 0 1-1.06 0l-2.83-2.83a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l2.3 2.3 5.14-5.14c.29-.29.77-.29 1.06 0 .29.29.29.76 0 1.06Z"></path></svg>'),Pi=M("<span> </span>"),Ti=M('<tr class="text-lg text-center"><td class="flex justify-center"><!></td><th class="text-center"> </th><td class="text-center"> </td><td class="text-center"><!></td></tr>');function Ri(a,e){$(e,!0);var t=Ti(),r=S(t),i=S(r);{var l=h=>{var m=Oi();N(h,m)};O(i,h=>{e.nutrient.requirement&&h(l)})}x(r);var u=y(r),n=S(u,!0);x(u);var s=y(u),o=S(s);x(s);var d=y(s),v=S(d);{var c=h=>{var m=Pi(),p=S(m,!0);x(m),J((C,w)=>{ne(m,1,C),H(p,w)},[()=>Number(e.nutrient.targetDifference)>=0?"text-success":"text-error",()=>Number(e.nutrient.targetDifference)!=0?`${Math.abs(e.nutrient.targetDifference)} ${e.nutrient.targetUnit} ${e.nutrient.targetDifference>=0?"over":"under"}`:"exact"]),N(h,m)},f=h=>{var m=ar("extra");N(h,m)};O(v,h=>{e.nutrient.requirement?h(c):h(f,!1)})}x(d),x(t),J(()=>{H(n,e.nutrient.name),H(o,`${e.nutrient.amount??""} ${e.nutrient.unit??""}`)}),N(a,t),ee()}var Ui=M('<tr class="text-lg text-center"><th class="text-center"> </th><td class="text-center"> </td><td class="text-center"> </td><td class="text-center"> </td></tr>');function qi(a,e){$(e,!0);var t=Ui(),r=S(t),i=S(r,!0);x(r);var l=y(r),u=S(l);x(l);var n=y(l),s=S(n,!0);x(n);var o=y(n),d=S(o,!0);x(o),x(t),J(()=>{H(i,e.product.name),H(u,`${e.product.amount??""} ${e.product.unit??""}`),H(s,e.product.serve),H(d,e.product.totalServe)}),N(a,t),ee()}var ji=M('<div class="my-3"><!> <p class="text-center text-md flex justify-center items-center gap-3 my-2">Req Amount: <span class="text-3xl text-accent"> </span></p> <p class="text-center text-md flex justify-center items-center gap-3 my-2">No. of Serves: <span class="text-3xl text-accent"> </span></p> <p class="text-center text-md flex justify-center items-center gap-3 my-2">Total Serves: <span class="text-3xl text-accent"> </span></p></div>');function Fi(a,e){$(e,!0);var t=ji(),r=S(t);K(r,{type:"h3",center:!0,get title(){return e.product.name}});var i=y(r,2),l=y(S(i)),u=S(l);x(l),x(i);var n=y(i,2),s=y(S(n)),o=S(s,!0);x(s),x(n);var d=y(n,2),v=y(S(d)),c=S(v,!0);x(v),x(d),x(t),J(()=>{H(u,`${e.product.amount??""} ${e.product.unit??""}`),H(o,e.product.serve),H(c,e.product.totalServe)}),N(a,t),ee()}var Li=M('<p class="text-error text-3xl font-error font-mono svelte-19h4tw3">-No Nutrients/Products-</p> <!>',1),Di=M('<p class="text-error text-3xl font-error svelte-19h4tw3">-Results Not Feasible-</p> <!> <!> <ol class="list bg-base-100 rounded-box shadow-md"><li class="list-row flex gap-10 items-center"><p class="text-5xl text-accent italic">1</p> <p class="text-xl">Check that each of your required nutrients are included as an ingredient in at least one of your products.</p></li> <li class="list-row flex gap-10 items-center"><p class="text-5xl text-accent italic">2</p> <p class="text-xl">Make sure your nutrients and ingredients have the same names.</p></li> <li class="list-row flex gap-10 items-center"><p class="text-5xl text-accent italic">3</p> <p class="text-xl">Add at least two products otherwise there is nothing for that needs to be calculated.</p></li></ol>',1),Hi=M('<p class="text-error text-3xl font-error svelte-19h4tw3">-Results Unbounded-</p> <!> <!> <ol class="list bg-base-100 rounded-box shadow-md"><li class="list-row flex gap-10 items-center"><p class="text-5xl text-accent italic">1</p> <p class="text-xl">Check that your data is entered correctly.</p></li> <li class="list-row flex gap-10 items-center"><p class="text-5xl text-accent italic">2</p> <p class="text-xl">Check your units carefully. If a required nutrient is 1g but your product only has 1μg / mcg per serve, this will produce errors.</p></li></ol>',1),Ji=M('<div class="flex flex-col sm:flex-row justify-center items-center gap-5 sm:gap-3 mb-5"><!> <div class="tooltip" data-tip="The cost is impossible to optimize with your current products and nutrient requirements."><input type="checkbox" disabled class="toggle toggle-xl rotate-90 sm:rotate-none svelte-19h4tw3"></div> <!></div>'),Zi=M('<div class="flex flex-col sm:flex-row justify-center items-center gap-5 sm:gap-3 mb-5"><!> <input type="checkbox" class="toggle toggle-xl border-secondary bg-secondary checked:border-secondary checked:bg-secondary rotate-90 sm:rotate-none svelte-19h4tw3"> <!></div>'),Yi=M('<div class="divider"></div>'),Wi=M("<!> <!>",1),Xi=M('<div class="divider"></div>'),Gi=M("<!> <!>",1),Ki=M('<div class="p-4 sm:p-8 sm:block flex flex-col justify-center items-center bg-base-300 rounded-2xl"><!> <!> <p class="flex justify-center items-center gap-3 sm:ro"><span class="text-accent text-5xl"> </span> per solution</p></div> <div class="p-4 sm:p-8 pb-0 sm:pb-8 bg-base-300 rounded-2xl"><!> <div class="overflow-x-auto hidden sm:block"><table class="table "><thead><tr class="text-lg text-center text-secondary"><th>Product</th><th>Solution<br>Amount</th><th>Number of<br>Serves</th><th>Product<br>Total Serves</th></tr></thead><tbody></tbody></table></div> <div class="block sm:hidden py-4 bg-base-300 rounded-2xl"></div></div> <div class="p-4 sm:p-8 bg-base-300 rounded-2xl"><!> <div class="overflow-x-auto hidden sm:block"><table class="table"><thead><tr class="text-lg text-center text-secondary"><th>Required<br>Nutrient</th><th>Nutrient</th><th>Solution<br>Amount</th><th>Target<br>Difference</th></tr></thead><tbody></tbody></table></div> <div class="overflow-x-auto block sm:hidden"></div></div>',1),Qi=M('<div class="m-5 lg:m-10 p-5 lg:p-15 flex flex-col gap-3 items-center justify-center bg-base-200 rounded-2xl outline-2"><div class="my-3"><!></div> <!></div>');function $i(a,e){$(e,!0);let t=qe(!1),r=q(()=>e.results&&e.results[g(t)==!1?0:1]);var i=Qi(),l=S(i),u=S(l);K(u,{type:"h2",center:!0,title:"Final Solution Recipe"}),x(l);var n=y(l,2);{var s=d=>{var v=Ee(),c=Z(v);{var f=m=>{var p=Li(),C=y(Z(p),2);ie(C,{center:!0,text:"Your solution can not be calculated until you have added Nutrients that you want in your solution and Products that will be used to create it."}),N(m,p)},h=(m,p)=>{{var C=I=>{var b=Di(),E=y(Z(b),2);ie(E,{center:!0,text:"Your solution can not be determined because the products you have entered do not contain the ingredients that meet your required nutrients."});var z=y(E,2);K(z,{type:"h3",title:"Suggestions"}),be(2),N(I,b)},w=(I,b)=>{{var E=k=>{var A=Hi(),P=y(Z(A),2);ie(P,{center:!0,text:"Your calculated solution determined nonsense results. This happens when too the data is unrealistic or the results are impossible to optimize."});var T=y(P,2);K(T,{type:"h3",title:"Suggestions"}),be(2),N(k,A)},z=k=>{var A=Ki(),P=Z(A),T=S(P);{var j=G=>{var W=Ji(),ae=S(W);K(ae,{type:"h4",title:"Optimize Nutrients"});var re=y(ae,4);K(re,{type:"h4",title:"Optimize Cost (Unavailable)"}),x(W),N(G,W)},L=G=>{var W=Zi(),ae=S(W);K(ae,{type:"h4",title:"Optimize Nutrients"});var re=y(ae,2);hr(re);var ce=y(re,2);K(ce,{type:"h4",title:"Optimize Cost"}),x(W),ni(re,()=>g(t),Se=>Be(t,Se)),N(G,W)};O(T,G=>{!e.results[1].feasible||!e.results[1].bounded?G(j):G(L,!1)})}var R=y(T,2);ie(R,{center:!0,text:"The above ratio of ingredients results in the following price."});var _=y(R,2),U=S(_),Y=S(U);x(U),be(),x(_),x(P);var V=y(P,2),D=S(V);ie(D,{center:!0,text:"Below are the amounts of each product required for your solution."});var ye=y(D,2),_e=S(ye),fe=y(S(_e));ue(fe,21,()=>g(r).products,Ne,(G,W)=>{qi(G,{get product(){return g(W)}})}),x(fe),x(_e),x(ye);var me=y(ye,2);ue(me,21,()=>g(r).products,Ne,(G,W,ae)=>{var re=Wi(),ce=Z(re);Fi(ce,{get product(){return g(W)}});var Se=y(ce,2);{var Oe=B=>{var F=Yi();N(B,F)};O(Se,B=>{ae!=g(r).nutrients.length-1&&B(Oe)})}N(G,re)}),x(me),x(V);var ge=y(V,2),de=S(ge);ie(de,{center:!0,text:"This solution will contain the following nutrients."});var se=y(de,2),we=S(se),pe=y(S(we));ue(pe,21,()=>g(r).nutrients,Ne,(G,W)=>{Ri(G,{get nutrient(){return g(W)}})}),x(pe),x(we),x(se);var Ie=y(se,2);ue(Ie,21,()=>g(r).nutrients,Ne,(G,W,ae)=>{var re=Gi(),ce=Z(re);zi(ce,{get nutrient(){return g(W)}});var Se=y(ce,2);{var Oe=B=>{var F=Xi();N(B,F)};O(Se,B=>{ae!=g(r).nutrients.length-1&&B(Oe)})}N(G,re)}),x(Ie),x(ge),J(G=>H(Y,`$${G??""}`),[()=>g(r).price.toFixed(2)]),N(k,A)};O(I,k=>{g(r).bounded?k(z,!1):k(E)},b)}};O(m,I=>{g(r).feasible?I(w,!1):I(C)},p)}};O(c,m=>{g(r).nutrients.length==0||g(r).products.length==0?m(f):m(h,!1)})}N(d,v)},o=d=>{ie(d,{center:!0,text:"Add a solution above, and then add your required nutrients and products. Come back here afterwards to see your final solution."})};O(n,d=>{g(r)?d(s):d(o,!1)})}x(i),N(a,i),ee()}var en=M(`<div class="m-5 lg:m-10 p-5 lg:p-15 flex flex-col items-center justify-center bg-base-200 rounded-2xl outline-2"><!> <!> <ul class="list rounded-xlW max-w-fit
"><li class="list-row"><div class="mt-2 size-10 lg:m-0 lg:size-20"><svg class="fill-accent" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 512 512"><path d="M255.916 38.149c-5.545 0-10.039 4.496-10.039 10.039v63.247c0 5.544 4.495 10.039 10.039 10.039 5.545 0 10.039-4.496 10.039-10.039V48.188c0-5.543-4.495-10.039-10.039-10.039zM215.926 38.149c-5.545 0-10.039 4.496-10.039 10.039v63.247c0 5.544 4.495 10.039 10.039 10.039 5.545 0 10.039-4.496 10.039-10.039V48.188c.001-5.543-4.494-10.039-10.039-10.039zM175.936 38.149c-5.545 0-10.039 4.496-10.039 10.039v63.247c0 5.544 4.495 10.039 10.039 10.039 5.545 0 10.039-4.496 10.039-10.039V48.188c0-5.543-4.494-10.039-10.039-10.039zM335.895 38.149c-5.545 0-10.039 4.496-10.039 10.039v63.247c0 5.544 4.495 10.039 10.039 10.039s10.039-4.496 10.039-10.039V48.188c0-5.543-4.494-10.039-10.039-10.039zM295.905 38.149c-5.544 0-10.039 4.496-10.039 10.039v63.247c0 5.544 4.496 10.039 10.039 10.039 5.544 0 10.039-4.496 10.039-10.039V48.188c0-5.543-4.495-10.039-10.039-10.039z"></path><path d="m396.201 149.206.026-107.134C396.228 18.874 377.354 0 354.154 0h-196.45c-23.199 0-42.072 18.874-42.072 42.069l-.026 107.248c-14.982 8.694-25.085 24.902-25.085 43.436v269.051c0 27.678 22.518 50.196 50.196 50.196h230.567c27.678 0 50.196-22.518 50.196-50.196V192.753c-.002-18.613-10.191-34.879-25.279-43.547zM135.71 42.072c0-12.127 9.867-21.994 21.994-21.994h196.451c12.127 0 21.994 9.867 21.994 21.991l-.024 100.466H135.686l.024-100.463zM401.4 201.816h-43.983c-5.545 0-10.039 4.496-10.039 10.039 0 5.544 4.495 10.039 10.039 10.039h43.827v180.678H237.611V221.895h67.372c5.544 0 10.039-4.496 10.039-10.039 0-5.544-4.496-10.039-10.039-10.039h-77.411c-5.544 0-10.039 4.496-10.039 10.039v200.756c0 5.544 4.496 10.039 10.039 10.039H401.4v39.153c0 16.607-13.511 30.118-30.118 30.118H140.716c-16.607 0-30.118-13.511-30.118-30.118V192.753c0-16.607 13.511-30.118 30.118-30.118h230.567c16.607 0 30.118 13.511 30.118 30.118v9.063z"></path><path d="M355.569 302.194h-26.102v-26.102c0-5.544-4.496-10.039-10.039-10.039-5.545 0-10.039 4.495-10.039 10.039v26.102h-26.102c-5.544 0-10.039 4.496-10.039 10.039 0 5.544 4.496 10.039 10.039 10.039h26.102v26.102c0 5.544 4.496 10.039 10.039 10.039 5.544 0 10.039-4.496 10.039-10.039v-26.102h26.102c5.544 0 10.039-4.496 10.039-10.039 0-5.543-4.495-10.039-10.039-10.039zM151.513 181.71c-5.545 0-10.039 4.495-10.039 10.039v22.086c0 5.545 4.495 10.039 10.039 10.039s10.039-4.495 10.039-10.039v-22.086c0-5.545-4.496-10.039-10.039-10.039zM151.513 235.922c-5.545 0-10.039 4.495-10.039 10.039v132.518c0 5.544 4.495 10.039 10.039 10.039s10.039-4.496 10.039-10.039V245.961c0-5.545-4.496-10.039-10.039-10.039z"></path></svg></div> <div class="list-col-grow"><div><!></div> <div><p class="text-xl py-3">Fill the nutrient mixture you need for your Solution.</p></div></div></li> <li class="list-row"><div class="mt-2 size-10 lg:m-0 lg:size-20"><svg class="fill-accent" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 512 512"><path d="M437.016 74.979C388.663 26.628 324.377 0 256 0S123.337 26.628 74.984 74.979C26.63 123.331 0 187.619 0 256c0 68.37 26.63 132.653 74.984 181.01C123.34 485.368 187.626 512 256 512s132.66-26.632 181.016-74.99C485.37 388.653 512 324.37 512 256c0-68.381-26.63-132.669-74.984-181.021zM256 491.922C125.912 491.922 20.078 386.088 20.078 256S125.912 20.078 256 20.078 491.922 125.912 491.922 256 386.088 491.922 256 491.922z"></path><path d="M396.549 189.742h-74.29v-74.291c0-5.545-4.495-10.039-10.039-10.039H199.78c-5.545 0-10.039 4.495-10.039 10.039v74.29h-74.29c-5.545 0-10.039 4.495-10.039 10.039v112.44c0 5.545 4.495 10.039 10.039 10.039h74.29v74.29c0 5.545 4.495 10.039 10.039 10.039h112.44c5.545 0 10.039-4.495 10.039-10.038v-74.29h74.29c5.545 0 10.039-4.495 10.039-10.039v-112.44c0-5.544-4.494-10.039-10.039-10.039zM386.51 302.18h-74.29c-5.545 0-10.039 4.495-10.039 10.039v74.29H209.82V312.22c0-5.545-4.495-10.039-10.039-10.039h-74.29V209.82h74.29c5.545 0 10.039-4.495 10.039-10.039V125.49h92.361v74.29c0 5.545 4.495 10.039 10.039 10.039h74.29v92.361zM339.162 55.675c-26.38-10.964-54.36-16.523-83.162-16.523-5.545 0-10.039 4.495-10.039 10.039 0 5.545 4.495 10.039 10.039 10.039 26.144 0 51.531 5.042 75.457 14.986a10.02 10.02 0 0 0 3.849.771c3.934 0 7.67-2.328 9.273-6.189 2.128-5.119-.297-10.994-5.417-13.123zM443.859 147.621c-18.393-31.814-44.766-58.643-76.268-77.585-4.752-2.857-10.919-1.322-13.777 3.429-2.857 4.752-1.321 10.92 3.43 13.777 59.815 35.966 95.524 99.053 95.524 168.758 0 5.545 4.495 10.039 10.039 10.039s10.039-4.495 10.039-10.039c.001-38.101-10.022-75.578-28.987-108.379z"></path></svg></div> <div class="list-col-grow"><div><!></div> <div><p class="text-xl py-3">Enter details about the Products you have bought to make your Solution.</p></div></div></li> <li class="list-row"><div class="mt-2 size-10 lg:m-0 lg:size-20"><svg class="fill-accent" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 512 512"><path d="M458.152 456.313a10.242 10.242 0 0 0-.713-1.289L326.341 254.426V58.227h11.981c5.545 0 10.039-4.495 10.039-10.039V10.039C348.361 4.495 343.866 0 338.322 0H173.679c-5.545 0-10.039 4.495-10.039 10.039v38.149c0 5.545 4.495 10.039 10.039 10.039h13.329v193.267L54.549 455.041c-.265.407-.5.833-.704 1.275-6.456 14.01-6.239 28.166.593 38.838C61.294 505.859 74.126 512 89.643 512h332.716c15.518 0 28.35-6.141 35.205-16.849 6.831-10.671 7.046-24.829.588-38.838zM183.718 38.149V20.078h144.565v18.071H183.718zm256.935 446.178c-3.136 4.898-9.633 7.595-18.294 7.595H89.643c-8.662 0-15.159-2.698-18.295-7.596-3.029-4.732-2.865-11.452.45-18.979l26.261-40.353h204.656c5.545 0 10.039-4.496 10.039-10.039 0-5.545-4.495-10.039-10.039-10.039h-191.59l94.338-144.965a10.042 10.042 0 0 0 1.625-5.475V58.227h99.175v199.188c0 1.951.568 3.859 1.635 5.492l132.307 202.447c3.312 7.525 3.476 14.243.448 18.973z"></path><path d="M230.232 117.459c-5.545 0-10.039 4.495-10.039 10.039v112.439c0 5.545 4.495 10.039 10.039 10.039 5.545 0 10.039-4.495 10.039-10.039V127.498c.001-5.545-4.494-10.039-10.039-10.039zM230.232 64.42c-5.545 0-10.039 4.495-10.039 10.039v22.784c0 5.545 4.495 10.039 10.039 10.039 5.545 0 10.039-4.495 10.039-10.039V74.459c.001-5.545-4.494-10.039-10.039-10.039zM380.655 404.915h-47.686c-5.545 0-10.039 4.495-10.039 10.039s4.495 10.039 10.039 10.039h47.686c5.545 0 10.039-4.496 10.039-10.039 0-5.545-4.494-10.039-10.039-10.039z"></path></svg></div> <div class="list-col-grow"><div><!></div> <div><p class="text-xl py-3">Your solution is the final mixture that you will drink.</p> <p class="text-xl pt-3">Get your calculated ingredient ratios and other useful information.</p></div></div></li></ul></div> <div class="m-5 lg:m-10 p-5 lg:p-15 flex flex-col items-center justify-center bg-base-200 rounded-2xl outline-2"><!> <p class="text-xl text-center pt-3 pb-1">This app is a free tool meant to help plan and organise electrolyte solutions.</p> <p class="text-xl text-center py-1">It might not always be accurate or complete, and it’s up to you to double-check the results before using them.</p> <p class="text-xl text-center py-1">We’re not responsible for any mistakes, problems, or outcomes from using this app.</p> <p class="text-xl text-center py-1">Always talk to a health professional if you’re planning to consume any mixtures or supplements.</p></div>`,1);function tn(a){var e=en(),t=Z(e),r=S(t);K(r,{type:"h2",center:!0,title:"Instructions"});var i=y(r,2);ie(i,{center:!0,text:"This app helps you calculate the right amounts of ingredients for electrolyte drinks."});var l=y(i,2),u=S(l),n=y(S(u),2),s=S(n),o=S(s);K(o,{type:"h3",title:"Add your required Nutrients"}),x(s),be(2),x(n),x(u);var d=y(u,2),v=y(S(d),2),c=S(v),f=S(c);K(f,{type:"h3",title:"Enter your Products"}),x(c),be(2),x(v),x(d);var h=y(d,2),m=y(S(h),2),p=S(m),C=S(p);K(C,{type:"h3",inline:!0,title:"See your Solution"}),x(p),be(2),x(m),x(h),x(l),x(t);var w=y(t,2),I=S(w);K(I,{type:"h2",center:!0,title:"Disclaimer"}),be(8),x(w),N(a,e)}var rn=M('<div aria-label="Info"><label class="floating-label"><input min="0"> <span class="label absolute left-0 top-0 text-sm px-2 pointer-events-non"> </span></label></div>');function X(a,e){$(e,!0);let t=te(e,"classes",3,null),r=te(e,"type",3,"number"),i=te(e,"error",3,0),l=te(e,"value",15),u=te(e,"tooltip",3,""),n=q(()=>i()==0?"":i()==1?"input-warning":"input-error");var s=rn(),o=S(s),d=S(o);hr(d),d.__change=function(...f){var h;(h=e.onchange)==null||h.apply(this,f)};var v=y(d,2),c=S(v,!0);x(v),x(o),x(s),J(()=>{ne(s,1,`input-field rounded-md bg-base-100 ${u()!=""?"tooltip":""}`),Ve(s,"data-tip",u()),Ve(o,"for",e.tagName),Ve(d,"id",e.tagName),ne(d,1,`input text-lg rounded-md text-center py-2 px-0 placeholder:text-center${(t()?` ${t()}`:"")??""} ${g(n)??""}`),Ve(d,"type",r()),H(c,e.placeholder)}),ii(d,l),N(a,s),ee()}je(["change"]);var nn=M("<option selected></option>"),an=M("<option></option>"),sn=M("<option selected> </option>"),on=M("<option> </option>"),ln=M("<option selected> </option>"),un=M("<option> </option>"),vn=M('<div aria-label="Info"><label class="floating-label select select-lg select-lg svelte-qmz5fd"><select class="dropdown svelte-qmz5fd"><!><!></select> <span class="absolute left-0 top-0 text-sm px-2 pointer-events-non svelte-qmz5fd"> </span></label></div>');function le(a,e){$(e,!0);let t=te(e,"error",3,0),r=te(e,"selected",15),i=te(e,"tooltip",3,""),l=te(e,"form",3,null),u=te(e,"options",3,null),n=q(()=>t()==0?"":" border select-error"),s=q(()=>l()==""||l()==null?[]:l()=="liquid"?[...Je,...br]:Je);var o=vn(),d=S(o),v=S(d);v.__change=function(...b){var E;(E=e.onchange)==null||E.apply(this,b)};var c=S(v);{var f=b=>{var E=nn();E.value=E.__value="",E.textContent="--Choose--",N(b,E)},h=b=>{var E=an();E.value=E.__value="",E.textContent="--Choose--",N(b,E)};O(c,b=>{r()==""?b(f):b(h,!1)})}var m=y(c);{var p=b=>{var E=Ee(),z=Z(E);ue(z,17,()=>g(s),Ne,(k,A)=>{var P=Ee(),T=Z(P);{var j=R=>{var _=sn(),U={},Y=S(_,!0);x(_),J(()=>{U!==(U=g(A))&&(_.value=(_.__value=g(A))??""),H(Y,g(A))}),N(R,_)},L=R=>{var _=on(),U={},Y=S(_,!0);x(_),J(()=>{U!==(U=g(A))&&(_.value=(_.__value=g(A))??""),H(Y,g(A))}),N(R,_)};O(T,R=>{r()==g(A)?R(j):R(L,!1)})}N(k,P)}),N(b,E)},C=b=>{var E=Ee(),z=Z(E);ue(z,17,u,Ne,(k,A)=>{var P=Ee(),T=Z(P);{var j=R=>{var _=ln(),U={},Y=S(_,!0);x(_),J(()=>{U!==(U=g(A))&&(_.value=(_.__value=g(A))??""),H(Y,g(A))}),N(R,_)},L=R=>{var _=un(),U={},Y=S(_,!0);x(_),J(()=>{U!==(U=g(A))&&(_.value=(_.__value=g(A))??""),H(Y,g(A))}),N(R,_)};O(T,R=>{r()==g(A)?R(j):R(L,!1)})}N(k,P)}),N(b,E)};O(m,b=>{g(s).length>0?b(p):b(C,!1)})}x(v);var w=y(v,2),I=S(w,!0);x(w),x(d),x(o),J(()=>{ne(o,1,`input-field rounded-md bg-base-100${i()!=""?" tooltip":""}${g(n)??""}`,"svelte-qmz5fd"),Ve(o,"data-tip",i()),Ve(d,"for",e.tagName),Ve(v,"id",e.tagName),H(I,e.name)}),gr(v,r),N(a,o),ee()}je(["change"]);var dn=M('<button class="btn btn-ghost btn-circle w-10" aria-label="Minus"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm6 0a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z" clip-rule="evenodd"></path></svg></button>');function ke(a,e){let t=te(e,"primary",3,!1);var r=dn();r.__click=function(...l){var u;(u=e.onclick)==null||u.apply(this,l)};var i=S(r);x(r),J(()=>ne(i,0,`${t()?"fill-primary":"fill-secondary"} hover:fill-accent lg:transition transition-discrete transform hover:scale-y-110 hover:scale-x-110`)),N(a,r)}je(["click"]);var cn=M('<button class="btn btn-ghost btn-circle w-10" aria-label="Add"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9a1 1 0 1 0-2 0v2H9a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2V9ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Z"></path></svg></button>');function Me(a,e){let t=te(e,"primary",3,!1);var r=cn();r.__click=function(...l){var u;(u=e.onclick)==null||u.apply(this,l)};var i=S(r);x(r),J(()=>ne(i,0,`${t()?"fill-primary":"fill-secondary"} hover:fill-accent lg:transition transition-discrete transform hover:scale-y-105 hover:scale-x-105`)),N(a,r)}je(["click"]);var hn=M('<div class="w-10 h-1"></div>'),fn=M('<div class="nutrient-row min-w-full flex flex-col md:flex-row md:flex-wrap md:gap-3 justify-center items-center"><div class="hidden md:flex gap-3 justify-center items-center"><!> <!> <!> <!> <!></div></div> <div class="md:hidden flex flex-col justify-center items-center gap-3 p-8 bg-base-300 rounded-2xl"><div class="container"><!></div> <div class="flex justify-center items-center gap-3 md:hidden flex justify-center items-center container "><!> <!></div> <div><!> <!></div></div>',1);function mn(a,e){$(e,!0);const t=Ae({name:e.nutrient.name==""?void 0:e.nutrient.name,amount:e.nutrient.amount==-1?void 0:e.nutrient.amount,unit:e.nutrient.unit}),r=Ae({name:0,amount:0,unit:0});function i(_){const U=l(_);r[_]=u(_,U),t[_]=U,r[_]==0&&e.onChange(["solutions",e.solId,"nutrients",e.nutId,_],U)}function l(_){switch(_){case"name":case"unit":return t[_];case"amount":return t[_]<=0?void 0:t[_];default:throw new Error("Unknown key name used for Product entry.")}}function u(_,U){switch(_){case"name":return U.replaceAll(" ","")===""?2:0;case"unit":return U===""?2:0;case"amount":return U==null?2:Number(U)==0?1:0;default:throw new Error("Unknown key name used for Product entry.")}}var n=fn(),s=Z(n),o=S(s),d=S(o);X(d,{placeholder:"Nutrient Name",get tagName(){return`desktop-nut${e.nutId??""}-name`},get error(){return r.name},type:"text",tooltip:"Use the EXACT same name that you will use for your product ingredients.",onchange:()=>i("name"),get value(){return t.name},set value(_){t.name=_}});var v=y(d,2);X(v,{placeholder:"Amount",get tagName(){return`desktop-nut${e.nutId??""}-amount`},get error(){return r.amount},tooltip:"Enter the amount of this nutrient required in your final solution.",onchange:()=>i("amount"),get value(){return t.amount},set value(_){t.amount=_}});var c=y(v,2);const f=q(()=>[...Je,...br]);le(c,{name:"Unit",get tagName(){return`desktop-nut${e.nutId??""}-unit`},get error(){return r.unit},onchange:()=>i("unit"),get options(){return g(f)},get selected(){return t.unit},set selected(_){t.unit=_}});var h=y(c,2);{var m=_=>{ke(_,{onclick:()=>e.onChange(["solutions",e.solId,"nutrients"],e.nutId,"deleteArrayEntry")})};O(h,_=>{e.single||_(m)})}var p=y(h,2);{var C=_=>{Me(_,{onclick:()=>e.onChange(["solutions",e.solId,"nutrients"],null,"addArrayEntry")})},w=_=>{var U=hn();N(_,U)};O(p,_=>{e.last?_(C):_(w,!1)})}x(o),x(s);var I=y(s,2),b=S(I),E=S(b);X(E,{placeholder:"Nutrient Name",get tagName(){return`mobile-nut${e.nutId??""}-name`},get error(){return r.name},type:"text",onchange:()=>i("name"),get value(){return t.name},set value(_){t.name=_}}),x(b);var z=y(b,2),k=S(z);X(k,{placeholder:"Amount",get tagName(){return`mobile-nut${e.nutId??""}-amount`},get error(){return r.amount},onchange:()=>i("amount"),get value(){return t.amount},set value(_){t.amount=_}});var A=y(k,2);le(A,{name:"Unit",get tagName(){return`mobile-nut${e.nutId??""}-unit`},get error(){return r.unit},onchange:()=>i("unit"),options:Je,get selected(){return t.unit},set selected(_){t.unit=_}}),x(z);var P=y(z,2),T=S(P);{var j=_=>{ke(_,{onclick:()=>e.onChange(["solutions",e.solId,"nutrients"],e.nutId,"deleteArrayEntry")})};O(T,_=>{e.single||_(j)})}var L=y(T,2);{var R=_=>{Me(_,{onclick:()=>e.onChange(["solutions",e.solId,"nutrients"],null,"addArrayEntry")})};O(L,_=>{e.last&&_(R)})}x(P),x(I),N(a,n),ee()}var gn=M('<!> <div class="min-w-full flex flex-col gap-3 justify-center items-center"></div>',1),pn=M('<div class="m-5 lg:m-10 p-5 lg:p-15 flex flex-col gap-3 items-center justify-center bg-base-200 rounded-2xl outline-2"><!> <!></div>');function xn(a,e){$(e,!0);var t=pn(),r=S(t);K(r,{type:"h2",title:"Nutrients"});var i=y(r,2);{var l=n=>{var s=gn(),o=Z(s);ie(o,{center:!0,text:"Add the required nutrients and amounts for your solution."});var d=y(o,2);ue(d,21,()=>e.nutrients,v=>v.id,(v,c)=>{const f=q(()=>e.nutrients.length==1),h=q(()=>g(c).id==e.nutrients.length-1);mn(v,{get solId(){return e.solId},get nutId(){return g(c).id},get nutrient(){return g(c)},get single(){return g(f)},get last(){return g(h)},get onChange(){return e.onChange}})}),x(d),N(n,s)},u=n=>{ie(n,{center:!0,text:"Create a solution above to begin adding nutrients."})};O(i,n=>{e.nutrients?n(l):n(u,!1)})}x(t),N(a,t),ee()}var bn=M('<div class="w-7 h-1"></div>'),yn=M('<div class="divider m-0"></div>'),_n=M('<div class="divider m-0"></div>'),wn=M('<div class="min-w-full hidden md:flex gap-3 justify-center items-center px-5 pt-5 bg-base-300 rounded-2xl"><!> <!> <!> <!> <!> <!></div> <div class="min-w-full flex flex-col gap-3 justify-center items-center md:hidden px-5 pt-5 bg-base-300 rounded-2xl"><div class="flex gap-3 justify-center items-center"><!></div> <div class="flex gap-3 justify-center items-center"><!> <!></div> <div class="flex gap-3 justify-center items-center"><!> <!></div> <!></div>',1);function In(a,e){$(e,!0);const t=Ae({name:e.ingredient.name==""?void 0:e.ingredient.name,amountPerServe:e.ingredient.amountPerServe==-1?void 0:e.ingredient.amountPerServe,unit:e.ingredient.unit}),r=Ae({name:0,amountPerServe:0,unit:0});function i(V){const D=l(V);r[V]=u(V,D),t[V]=D,r[V]!=2&&e.onChange(["solutions",e.solId,"products",e.prodId,"ingredients",e.ingId,V],D)}function l(V){switch(V){case"name":case"unit":return t[V];case"amountPerServe":return t[V]<=0?void 0:t[V];default:throw new Error("Unknown key name used for Product entry.")}}function u(V,D){switch(V){case"name":return e.nutrientNames.includes(D)?0:D.replaceAll(" ","")==""?2:1;case"unit":return D===""?2:0;case"amountPerServe":return D==null?2:Number(D)==0?1:0;default:throw new Error("Unknown key name used for Product entry.")}}var n=wn(),s=Z(n),o=S(s);const d=q(()=>r.name==1?"This ingredient is not included in your nutrients list. If it should be, check the spelling.":"Enter the ingredient name EXACTLY the same as entered in the Nutrients tab.");X(o,{placeholder:"Product Name",get tagName(){return`desktop-prod${e.prodId??""}-ing${e.ingId??""}-name`},get error(){return r.name},type:"text",get tooltip(){return g(d)},onchange:()=>i("name"),get value(){return t.name},set value(V){t.name=V}});var v=y(o,2);X(v,{placeholder:"Amount",get tagName(){return`desktop-prod${e.prodId??""}-ing${e.ingId??""}-amount`},get error(){return r.amountPerServe},tooltip:"Enter the amount of this nutrient per serve. This can be found in the nutrition table on the back of your product.",onchange:()=>i("amountPerServe"),get value(){return t.amountPerServe},set value(V){t.amountPerServe=V}});var c=y(v,2);le(c,{name:"Unit",get tagName(){return`desktop-prod${e.prodId??""}-ing${e.ingId??""}-unit`},get error(){return r.unit},tooltip:"Enter the units used per serve for this nutrient. This can be found in the nutrition table on the back of your product.",onchange:()=>i("unit"),get form(){return e.productForm},get selected(){return t.unit},set selected(V){t.unit=V}});var f=y(c,2);{var h=V=>{ke(V,{onclick:()=>e.onChange(["solutions",e.solId,"products",e.prodId,"ingredients"],e.ingId,"deleteArrayEntry")})};O(f,V=>{e.single||V(h)})}var m=y(f,2);{var p=V=>{Me(V,{onclick:()=>e.onChange(["solutions",e.solId,"products",e.prodId,"ingredients"],null,"addArrayEntry")})},C=V=>{var D=bn();N(V,D)};O(m,V=>{e.last?V(p):V(C,!1)})}var w=y(m,2);{var I=V=>{var D=yn();N(V,D)};O(w,V=>{e.last||V(I)})}x(s);var b=y(s,2),E=S(b),z=S(E);X(z,{placeholder:"Product Name",get tagName(){return`mobile-prod${e.prodId??""}-ing${e.ingId??""}-name`},get error(){return r.name},type:"text",tooltip:"Enter the ingredient name EXACTLY the same as entered in the Nutrients tab.",onchange:()=>i("name"),get value(){return t.name},set value(V){t.name=V}}),x(E);var k=y(E,2),A=S(k);X(A,{placeholder:"Amount",get tagName(){return`mobile-prod${e.prodId??""}-ing${e.ingId??""}-amount`},get error(){return r.amount},classes:"w-20",tooltip:"Enter the amount of this nutrient per serve. This can be found in the nutrition table on the back of your product.",onchange:()=>i("amountPerServe"),get value(){return t.amountPerServe},set value(V){t.amountPerServe=V}});var P=y(A,2);le(P,{name:"Unit",get tagName(){return`mobile-prod${e.prodId??""}-ing${e.ingId??""}-unit`},get error(){return r.unit},tooltip:"Enter the units used per serve for this nutrient. This can be found in the nutrition table on the back of your product.",onchange:()=>i("unit"),get form(){return e.productForm},get selected(){return t.unit},set selected(V){t.unit=V}}),x(k);var T=y(k,2),j=S(T);{var L=V=>{ke(V,{onclick:()=>e.onChange(["solutions",e.solId,"products",e.prodId,"ingredients"],e.ingId,"deleteArrayEntry")})};O(j,V=>{e.single||V(L)})}var R=y(j,2);{var _=V=>{Me(V,{onclick:()=>e.onChange(["solutions",e.solId,"products",e.prodId,"ingredients"],null,"addArrayEntry")})};O(R,V=>{e.last&&V(_)})}x(T);var U=y(T,2);{var Y=V=>{var D=_n();N(V,D)};O(U,V=>{e.last||V(Y)})}x(b),N(a,n),ee()}var Sn=M("<div></div>"),Cn=M('<div class="ingredients-container"><!> <!></div>');function nr(a,e){$(e,!0);var t=Cn(),r=S(t);K(r,{type:"h4",center:!0,get title(){return`${e.product.name??""} Ingredients`}});var i=y(r,2);{var l=u=>{var n=Sn();ue(n,21,()=>e.product.ingredients,s=>s.id,(s,o)=>{const d=q(()=>e.product.ingredients.length==1),v=q(()=>g(o).id==e.product.ingredients.length-1);In(s,{get solId(){return e.solId},get prodId(){return e.product.id},get ingId(){return g(o).id},get productForm(){return e.product.form},get ingredient(){return g(o)},get nutrientNames(){return e.nutrientNames},get single(){return g(d)},get last(){return g(v)},get onChange(){return e.onChange}})}),x(n),N(u,n)};O(i,u=>{e.product&&u(l)})}x(t),N(a,t),ee()}var En=M('<div class="w-13 h-1"></div>'),Bn=M('<div class="flex gap-3 justify-center items-center"><!> <!></div>'),Vn=M('<div class="flex gap-3 justify-center items-center"><!> <!></div> <div class="flex gap-3 justify-center items-center"><!> <!></div>',1),Nn=M('<div><div class="flex gap-3 justify-center items-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="divider m-0 svelte-19zghj8"></div> <!></div> <div><div class="flex gap-3 justify-center items-center"><!></div> <div class="flex gap-3 justify-center items-center"><!> <!></div> <!> <div><!> <!></div> <div class="divider m-0 svelte-19zghj8"></div> <!></div>',1);function An(a,e){$(e,!0);const t=Ae({name:e.product.name==""?void 0:e.product.name,price:e.product.price==-1?void 0:`$${e.product.price}`,form:e.product.form==""?void 0:e.product.form,totalAmount:e.product.totalAmount==-1?void 0:e.product.totalAmount,totalUnits:e.product.totalUnits,serveSize:e.product.serveSize==-1?void 0:e.product.serveSize,serveUnits:e.product.serveUnits});let r=q(()=>t.form=="capsule"||t.form=="tablet");const i=Ae({name:0,price:0,form:0,totalAmount:0,totalUnits:0,serveSize:0,serveUnits:0});function l(B){const F=u(B);i[B]=n(B,F),t[B]=B=="price"?`$${F}`:F,i[B]==0&&e.onChange(["solutions",e.solId,"products",e.prodId,B],F)}function u(B){var F;switch(B){case"name":case"totalUnits":case"serveUnits":return t[B];case"form":return(t[B]=="capsule"||t[B]=="tablet")&&(t.totalUnits="",t.serveUnits=""),t[B];case"price":const oe=(F=t[B].match(/[0-9.]*/g))==null?void 0:F.join("");return console.log(oe),oe||0;case"totalAmount":case"serveSize":return t[B]<=0?void 0:t[B];default:throw new Error("Unknown key name used for Product entry.")}}function n(B,F){switch(B){case"name":case"form":case"totalUnits":case"serveUnits":return F.replaceAll(" ","")===""?2:0;case"totalAmount":case"serveSize":case"price":return F==null?2:Number(F)==0?1:0;default:throw new Error("Unknown key name used for Product entry.")}}function s(){return t.form=="capsule"?"Total Caps":t.form=="tablet"?"Total Tabs":"Total Amt"}function o(){return t.form=="capsule"?"Caps per Serve":t.form=="tablet"?"Tabs per Serve":"Serve Amt"}function d(){return t.form=="capsule"?"Enter the total number of capsules in your product.":t.form=="tablet"?"Enter the total number of tablets in your product.":"Enter the total weight/volume of your product."}function v(){let B="";return t.form=="capsule"?B+="Enter the total number of capsules per serve.":t.form=="tablet"?B+="Enter the total number of tablets per serve.":B+="Enter the total weight/volume per serve of your product.",B+="Check the nutrition table on the back of your product.",B}var c=Nn(),f=Z(c),h=S(f),m=S(h);X(m,{placeholder:"Product Name",get tagName(){return`desktop-prod${e.prodId??""}-name`},get error(){return i.name},type:"text",classes:"max-w-40",onchange:()=>l("name"),get value(){return t.name},set value(B){t.name=B}});var p=y(m,2);const C=q(()=>g(r)?"max-w-20":"max-w-15");X(p,{placeholder:"Price",get tagName(){return`desktop-prod${e.prodId??""}-price`},get error(){return i.price},type:"text",get classes(){return g(C)},tooltip:"Enter how much you paid per product to possibly optimize your solution by cost. If 0 is entered, the product will be assumed to have no cost.",onchange:()=>l("price"),get value(){return t.price},set value(B){t.price=B}});var w=y(p,2);le(w,{name:"Form",get tagName(){return`desktop-prod${e.prodId??""}-form`},get error(){return i.form},tooltip:"The product form is important in calculating your required amounts. Take note of the following field prompts depending on your form entered here.",onchange:()=>l("form"),options:rr,get selected(){return t.form},set selected(B){t.form=B}});var I=y(w,2);const b=q(s),E=q(()=>g(r)?"max-w-20":"max-w-15"),z=q(d);X(I,{get placeholder(){return g(b)},get tagName(){return`desktop-prod${e.prodId??""}-totalAmt`},get error(){return i.totalAmount},get classes(){return g(E)},get tooltip(){return g(z)},onchange:()=>l("totalAmount"),get value(){return t.totalAmount},set value(B){t.totalAmount=B}});var k=y(I,2);{var A=B=>{le(B,{name:"Unit",get tagName(){return`desktop-prod${e.prodId??""}-totalUnit`},tooltip:"Check the front of your product for the units used in the total weight/volume.",onchange:()=>l("totalUnits"),get form(){return t.form},get selected(){return t.totalUnits},set selected(F){t.totalUnits=F}})};O(k,B=>{t.form!="capsule"&&t.form!="tablet"&&B(A)})}var P=y(k,2);const T=q(o),j=q(()=>g(r)?"max-w-20":"max-w-15"),L=q(v);X(P,{get placeholder(){return g(T)},get tagName(){return`desktop-prod${e.prodId??""}-serveAmt`},get error(){return i.serveSize},get classes(){return g(j)},get tooltip(){return g(L)},onchange:()=>l("serveSize"),get value(){return t.serveSize},set value(B){t.serveSize=B}});var R=y(P,2);{var _=B=>{le(B,{name:"Unit",get tagName(){return`desktop-prod${e.prodId??""}-serveUnit`},tooltip:"Check the nutrition table on the back of your product for the units used per serve.",onchange:()=>l("serveUnits"),get form(){return t.form},get selected(){return t.serveUnits},set selected(F){t.serveUnits=F}})};O(R,B=>{t.form!="capsule"&&t.form!="tablet"&&B(_)})}var U=y(R,2);{var Y=B=>{ke(B,{primary:!0,onclick:()=>e.onChange(["solutions",e.solId,"products"],e.prodId,"deleteArrayEntry")})};O(U,B=>{e.single||B(Y)})}var V=y(U,2);{var D=B=>{Me(B,{primary:!0,onclick:()=>e.onChange(["solutions",e.solId,"products"],null,"addArrayEntry")})},ye=B=>{var F=En();N(B,F)};O(V,B=>{e.last?B(D):B(ye,!1)})}x(h);var _e=y(h,4);nr(_e,{get solId(){return e.solId},get product(){return e.product},get nutrientNames(){return e.nutrientNames},get onChange(){return e.onChange}}),x(f);var fe=y(f,2),me=S(fe),ge=S(me);X(ge,{placeholder:"Product Name",get tagName(){return`mobile-prod${e.prodId??""}-name`},get error(){return i.name},type:"text",onchange:()=>l("name"),get value(){return t.name},set value(B){t.name=B}}),x(me);var de=y(me,2),se=S(de);le(se,{name:"Form",get tagName(){return`mobile-prod${e.prodId??""}-form`},get error(){return i.form},tooltip:"The product form is important in calculating your required amounts. Take note of the following field prompts depending on your form entered here.",onchange:()=>l("form"),options:rr,get selected(){return t.form},set selected(B){t.form=B}});var we=y(se,2);X(we,{placeholder:"Price",get tagName(){return`mobile-prod${e.prodId??""}-price`},get error(){return i.price},type:"text",classes:"w-20",tooltip:"Enter how much you paid per product to possibly optimize your solution by cost. If 0 is entered, the product will be assumed to have no cost.",onchange:()=>l("price"),get value(){return t.price},set value(B){t.price=B}}),x(de);var pe=y(de,2);{var Ie=B=>{var F=Bn(),oe=S(F);const Fe=q(s),Ze=q(()=>g(r)?"max-w-20":"max-w-15"),Ye=q(d);X(oe,{get placeholder(){return g(Fe)},get tagName(){return`desktop-prod${e.prodId??""}-totalAmt`},get error(){return i.totalAmount},get classes(){return g(Ze)},get tooltip(){return g(Ye)},onchange:()=>l("totalAmount"),get value(){return t.totalAmount},set value(Pe){t.totalAmount=Pe}});var We=y(oe,2);const Xe=q(o),Le=q(()=>g(r)?"max-w-20":"max-w-15"),De=q(v);X(We,{get placeholder(){return g(Xe)},get tagName(){return`desktop-prod${e.prodId??""}-serveAmt`},get error(){return i.serveSize},get classes(){return g(Le)},get tooltip(){return g(De)},onchange:()=>l("serveSize"),get value(){return t.serveSize},set value(Pe){t.serveSize=Pe}}),x(F),N(B,F)},G=B=>{var F=Vn(),oe=Z(F),Fe=S(oe);const Ze=q(s),Ye=q(()=>g(r)?"max-w-20":"max-w-15"),We=q(d);X(Fe,{get placeholder(){return g(Ze)},get tagName(){return`desktop-prod${e.prodId??""}-totalAmt`},get error(){return i.totalAmount},get classes(){return g(Ye)},get tooltip(){return g(We)},onchange:()=>l("totalAmount"),get value(){return t.totalAmount},set value(Ce){t.totalAmount=Ce}});var Xe=y(Fe,2);le(Xe,{name:"Unit",get tagName(){return`desktop-prod${e.prodId??""}-totalUnit`},tooltip:"Check the front of your product for the units used in the total weight/volume.",onchange:()=>l("totalUnits"),get form(){return t.form},get selected(){return t.totalUnits},set selected(Ce){t.totalUnits=Ce}}),x(oe);var Le=y(oe,2),De=S(Le);const Pe=q(o),Ir=q(()=>g(r)?"max-w-20":"max-w-15"),Sr=q(v);X(De,{get placeholder(){return g(Pe)},get tagName(){return`desktop-prod${e.prodId??""}-serveAmt`},get error(){return i.serveSize},get classes(){return g(Ir)},get tooltip(){return g(Sr)},onchange:()=>l("serveSize"),get value(){return t.serveSize},set value(Ce){t.serveSize=Ce}});var Cr=y(De,2);le(Cr,{name:"Unit",get tagName(){return`desktop-prod${e.prodId??""}-serveUnit`},tooltip:"Check the nutrition table on the back of your product for the units used per serve.",onchange:()=>l("serveUnits"),get form(){return t.form},get selected(){return t.serveUnits},set selected(Ce){t.serveUnits=Ce}}),x(Le),N(B,F)};O(pe,B=>{t.form=="capsule"||t.form=="tablet"?B(Ie):B(G,!1)})}var W=y(pe,2),ae=S(W);{var re=B=>{ke(B,{primary:!0,onclick:()=>e.onChange(["solutions",e.solId,"products"],e.prodId,"deleteArrayEntry")})};O(ae,B=>{e.single||B(re)})}var ce=y(ae,2);{var Se=B=>{Me(B,{primary:!0,onclick:()=>e.onChange(["solutions",e.solId,"products"],null,"addArrayEntry")})};O(ce,B=>{e.last&&B(Se)})}x(W);var Oe=y(W,4);nr(Oe,{get solId(){return e.solId},get product(){return e.product},get nutrientNames(){return e.nutrientNames},get onChange(){return e.onChange}}),x(fe),J(()=>{ne(f,1,`min-w-full hidden md:flex flex-col gap-3 justify-center items-center p-8 bg-base-300 rounded-2xl ${i?"input-error":""}`),ne(fe,1,`product-row min-w-full flex flex-col gap-3 justify-center items-center md:hidden p-8 bg-base-300 rounded-2xl ${i?"input-error":""}`)}),N(a,c),ee()}var kn=M('<div class="individual-product-container"><!></div>'),Mn=M('<!> <div class="min-w-full flex flex-col gap-3 justify-center items-center"></div>',1),zn=M('<div class="m-5 lg:m-10 p-5 lg:p-15 flex flex-col gap-3 items-center justify-center bg-base-200 rounded-2xl outline-2"><!> <!></div>');function On(a,e){$(e,!0);var t=zn(),r=S(t);K(r,{type:"h2",title:"Products"});var i=y(r,2);{var l=n=>{var s=Mn(),o=Z(s);ie(o,{center:!0,text:"Add your bought products' information here."});var d=y(o,2);ue(d,21,()=>e.products,v=>v.id,(v,c)=>{var f=kn(),h=S(f);const m=q(()=>e.products.length==1),p=q(()=>g(c).id==e.products.length-1);An(h,{get solId(){return e.solId},get prodId(){return g(c).id},get product(){return g(c)},get nutrientNames(){return e.nutrientNames},get single(){return g(m)},get last(){return g(p)},get onChange(){return e.onChange}}),x(f),N(v,f)}),x(d),N(n,s)},u=n=>{ie(n,{center:!0,text:"Add a solution above to begin adding your products."})};O(i,n=>{e.products?n(l):n(u,!1)})}x(t),N(a,t),ee()}var Pn=(a,e,t)=>e.onChange(["selected"],g(t)),Tn=M("<option selected> </option>"),Rn=M("<option> </option>"),Un=M('<div><label class="floating-label select select-lg svelte-6euabr" for="solution-selector"><select class="dropdown svelte-6euabr" id="solution-selector"></select> <span class="absolute left-0 top-0 text-sm px-2 pointer-events-non svelte-6euabr">Solution</span></label> <!></div>'),qn=M('<div class="m-5 lg:m-10 p-5 lg:p-15 bg-base-200 rounded-2xl flex flex-col justify-center items-center gap-3 outline-2"><!> <!> <div class="flex flex-wrap justify-center items-center gap-3 lg:gap-10"><!> <form class="flex gap-3 items-center justify-center"><!> <!></form></div></div>');function jn(a,e){$(e,!0);let t=q(()=>e.data.selected),r=qe(""),i=qe(0);function l(){Be(i,u(g(r)),!0),g(i)!=2&&(e.onChange(["solutions"],g(r),"addArrayEntry"),Be(r,""))}function u(p){return p.replaceAll(" ","")===""?2:0}var n=qn(),s=S(n);K(s,{type:"h2",title:"Current Solution"});var o=y(s,2);ie(o,{center:!0,text:"Choose your active solution or add a new one."});var d=y(o,2),v=S(d);{var c=p=>{var C=Un(),w=S(C),I=S(w);I.__change=[Pn,e,t],ue(I,21,()=>e.data.solutions,Ne,(z,k,A)=>{var P=Ee(),T=Z(P);{var j=R=>{var _=Tn();_.value=(_.__value=A)??"";var U=S(_,!0);x(_),J(()=>H(U,g(k).name)),N(R,_)},L=R=>{var _=Rn();_.value=(_.__value=A)??"";var U=S(_,!0);x(_),J(()=>H(U,g(k).name)),N(R,_)};O(T,R=>{e.data.selected==g(k).id?R(j):R(L,!1)})}N(z,P)}),x(I),be(2),x(w);var b=y(w,2);const E=q(()=>e.onChange(["solutions"],g(t),"deleteArrayEntry"));ke(b,{get onclick(){return g(E)}}),x(C),J(()=>ne(C,1,`flex gap-3 items-center justify-center ${e.data.length==0?"hide":"show"}`)),gr(I,()=>g(t),z=>Be(t,z)),N(p,C)};O(v,p=>{e.data.solutions.length!=0&&p(c)})}var f=y(v,2),h=S(f);X(h,{placeholder:"New Solution Name",tagName:"solution-adder",type:"text",get error(){return g(i)},onchange:null,get value(){return g(r)},set value(p){Be(r,p,!0)}});var m=y(h,2);Me(m,{onclick:l}),x(f),x(d),x(n),N(a,n),ee()}je(["change"]);var Fn=M("<!> <!>",1);function Gn(a,e){$(e,!0);const[t,r]=Br(),i=()=>Vr(It,"$pageId",t);It.set("home");let l=qe(Ae({selected:0,solutions:[]})),u=qe(null);Kr(()=>{Be(l,n(),!0)});function n(){const p=JSON.parse(localStorage.getItem("data"));return p&&p.solutions.length>0?ze.fromJSON(p):ze.setExampleData(g(l))}function s(){localStorage.setItem("data",ze.toJSON(g(l)))}function o(p,C,w=null){if(w)try{ze[w](g(l),p,C)}catch(I){I instanceof Error&&I.message=="ts[func] is not a function"?console.log(`ts.${w}() is not a function.`):I instanceof Error&&console.log(I)}else try{ze.updateData(g(l),p,C)}catch(I){I instanceof Error&&console.log(I.message)}}Gr(()=>{s(),Be(u,ze.updateSolutionResults(g(l)),!0)});var d=Fn(),v=Z(d);{var c=p=>{jn(p,{get data(){return g(l)},onChange:o})};O(v,p=>{i()!="home"&&p(c)})}var f=y(v,2);{var h=p=>{tn(p)},m=(p,C)=>{{var w=b=>{const E=q(()=>g(l).solutions[g(l).selected]?g(l).solutions[g(l).selected].nutrients:null);xn(b,{get solId(){return g(l).selected},get nutrients(){return g(E)},onChange:o})},I=(b,E)=>{{var z=A=>{const P=q(()=>g(l).solutions[g(l).selected]?g(l).solutions[g(l).selected].products:null),T=q(()=>g(l).solutions[g(l).selected]?g(l).solutions[g(l).selected].nutrients.map(j=>j.name):null);On(A,{get solId(){return g(l).selected},get products(){return g(P)},get nutrientNames(){return g(T)},onChange:o})},k=(A,P)=>{{var T=j=>{$i(j,{get results(){return g(u)}})};O(A,j=>{i()=="solutions"&&j(T)},P)}};O(b,A=>{i()=="products"?A(z):A(k,!1)},E)}};O(p,b=>{i()=="nutrients"?b(w):b(I,!1)},C)}};O(f,p=>{i()=="home"?p(h):p(m,!1)})}N(a,d),ee(),r()}export{Gn as component};
